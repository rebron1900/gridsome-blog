<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>åªæ˜¯ç©ç© | JUST FUN - åªæ˜¯ç©ç© | JUST FUN</title><meta name="gridsome:hash" content="03d4e26bc6a7202eb1f57b68d71e0c4979a9960b"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="/gridsome-blog"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.9bb7ffafafc09ac851d81afb65b8ef59.png"><link rel="preload" href="/assets/css/0.styles.be694e5c.css" as="style"><link rel="preload" href="/assets/js/app.86bb94d9.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--ghost-post-vue.0de93747.js" as="script"><link rel="prefetch" href="/assets/js/6.4b802b1d.js"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.5fb9a6b8.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-copy-vue.caed7301.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.a2bb3d29.js"><link rel="stylesheet" href="/assets/css/0.styles.be694e5c.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body  class="darkmode">
    <main role="main" data-server-rendered="true" id="app" class="container"><div class="row"><header class="header"><a href="/" class="active"><h1>ğŸ‘¨â€ğŸ’» åªæ˜¯ç©ç© | JUST FUN</h1></a><!----></header><div class="article"><h1 class="article-title">Godotæ¸¸æˆå¼•æ“å­¦ä¹  ç¬¬ä¸ƒè¯¾</h1><p class="article-date"> 25 December 2020 Â· <i> min read</i></p><article><!--kg-card-begin: markdown--><p>ä»Šå¤©æ˜¯åœ£è¯èŠ‚ï¼Œæœ‹å‹åœˆé‡Œçƒ­çƒ­é—¹é—¹çš„è®©æˆ‘æ„Ÿè§‰å…¨ä¸–ç•Œéƒ½å†è¿‡åœ£è¯èŠ‚ï¼Œå›å®¶çš„ä¸€è·¯ä¸Šä¹Ÿæ ¼å¤–å†·æ¸…ï¼Œç›¸æ¯”éƒ½å»è´­ç‰©ä¸­å¿ƒæˆ–è€…åƒå–ç©ä¹ä¸€æ¡è¡—è¿‡åœ£è¯èŠ‚å»äº†æŠŠã€‚</p>
<p>ä»Šå¤©ç»§ç»­å­¦ä¹ Godotï¼ŒUPä»Šå¤©è®²çš„æ˜¯å®ç°å¾ˆå¤šåŠ¨ä½œæ¸¸æˆä¸­çš„<code>æ®‹å½±æ•ˆæœ</code>ï¼Œå¯¹è¿™ä¸ªå°è±¡æœ€æ·±åˆ»çš„æ˜¯ä»¥å‰çœ‹é»‘å®¢å¸å›½æ—¶å€™ï¼Œå²å¯†æ–¯çš„é‚£ä¸ªèº²å­å¼¹çš„æ®‹å½±å¤ªå¸…äº†ï¼Œåº”è¯¥ç®—æ˜¯ååœºé¢äº†å§ï¼å¥½äº†ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œå¼€å¹²ã€‚</p>
<h2 id>ç»™è§’è‰²æ·»åŠ æ®‹å½±</h2>
<p>å…¶å®æˆ‘ä¹‹å‰çœ‹<a href="https://space.bilibili.com/58449087/?ref=1900.live">Carotaa666</a>çš„ç›´æ’­çš„æ—¶å€™çœ‹åˆ°ä»–è¯´è¿‡è¿™ä¸ªæ€è·¯ï¼Œå¤§æ¦‚æ˜¯é€šè¿‡è®¡æ—¶å™¨æŒ‰ä¸€å®šçš„å‘¨æœŸç»˜åˆ¶ä¸€ä¸ªç²¾çµï¼Œç„¶åå†é”€æ¯æ‰ã€‚</p>
<p>è¿™é‡ŒUPä¸»çš„æ€è·¯ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå…ˆæ–°å»ºä¸€ä¸ªåœºæ™¯åä¸º<code>Trail</code>å†é‡Œé¢æ·»åŠ ä¸€ä¸ªSpriteèŠ‚ç‚¹ï¼Œå’Œä¸€ä¸ª<code>AnimationPlayer</code>ï¼Œåˆ©ç”¨æˆ‘ä»¬ä»¥å‰çš„å­¦çš„ï¼Œæ·»åŠ ä¸€ä¸ªåä¸º<code>fadeout</code>çš„æ¸éšåŠ¨ç”»ï¼Œå¹¶è®©åŠ¨ç”»åœ¨ä¸€å®šæ—¶é—´åè‡ªæˆ‘é”€æ¯ï¼Œç„¶åè®¾ç½®ä»æ¸…æ™°åˆ°æ¨¡ç³Šçš„æ¸å˜ã€‚</p>
<p><img src="https://cdn.1900.live/typora/image-20201225220650839.png" alt="image-20201225220650839" loading="lazy"></p>
<p>ç„¶åç»™<code>Player</code>åœºæ™¯æ·»åŠ ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œç„¶åå°±æ˜¯ä»£ç éƒ¨åˆ†äº†ã€‚è¿™é‡Œè¯´åˆ°ä¸€ä¸ªä»¥åå¯èƒ½ä¼šç»å¸¸ç”¨çš„å‡½æ•°<code>preload</code>ï¼Œå…·ä½“çœ‹ä»£ç ï¼Œæˆ‘éƒ½å†™äº† æ³¨é‡Šäº†ã€‚</p>
<pre><code class="language-python"># è¿æ¥è®¡æ—¶å™¨çš„Timeroutä¿¡å·	
func _on_TrailTimer_timeout():
	# å¦‚æœè§’è‰²æ²¡æœ‰ç§»åŠ¨ï¼Œåˆ™ä¸ç»˜åˆ¶å½±å­
	if velocity.x == 0:
		return
	
	# ç”¨preloadé¢„åŠ è½½æˆ‘ä»¬åšçš„é‚£ä¸ªå½±å­åœºæ™¯ï¼Œå¹¶å®ä¾‹åŒ–
	var trail = preload(&quot;res://src/effects/Trail.tscn&quot;).instance()
	# æŠŠå®ƒæ·»åŠ è¿›çˆ¶åœºæ™¯
	get_parent().add_child(trail)
	# æ”¹å˜å®ƒåœ¨åœºæ™¯æ ‘ä¸­çš„ä½ç½®åˆ°playerä¸‹æ–¹
	get_parent().move_child(trail, get_index())

	# ä¸‹é¢è¿™äº›å±æ€§æ˜¯è¦ä»è§’è‰²ä¸Šè¯»å–å‡ºæ¥å¤åˆ¶ç»™å½±å­çš„
	var properties = [
		&quot;hframes&quot;,
		&quot;vframes&quot;,
		&quot;frame&quot;,
		&quot;texture&quot;,
		&quot;global_position&quot;,
		&quot;flip_h&quot;
	]
	# ä»è§’è‰²èº«ä¸Šéå†ï¼Œå¹¶ç»™ä¸å½±å­
	for name in  properties:
		trail.set(name, sprite.get(name))
</code></pre>
<h2 id="shader">ç¬¬ä¸€æ¬¡äº†è§£Shader</h2>
<p>è¿™é‡Œè¿˜è¯´äº†shaderï¼Œä»€ä¹ˆæ˜¯shaderï¼Ÿæˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦ï¼Œä»¥å‰ç©ç»åœ°æ±‚ç”Ÿçš„ä¸ºäº†æ”¹å˜ç”»è´¨ç”¨è¿‡ä¸€æ¬¡ï¼Œä¸è¿‡å®Œå…¨ä¸çŸ¥é“æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼›</p>
<blockquote>
<p>ç€è‰²å™¨ï¼ˆShaderï¼‰æ˜¯ç”¨æ¥å®ç°<a href="https://baike.baidu.com/item/%E5%9B%BE%E5%83%8F%E6%B8%B2%E6%9F%93/22031608?ref=1900.live">å›¾åƒæ¸²æŸ“</a>çš„ï¼Œç”¨æ¥æ›¿ä»£å›ºå®šæ¸²æŸ“ç®¡çº¿çš„å¯ç¼–è¾‘ç¨‹åºã€‚å…¶ä¸­Vertex Shaderä¸»è¦è´Ÿè´£é¡¶ç‚¹çš„å‡ ä½•å…³ç³»ç­‰çš„è¿ç®—ï¼ŒPixel Shaderä¸»è¦è´Ÿè´£ç‰‡æºé¢œè‰²ç­‰çš„è®¡ç®—ã€‚</p>
<p>ç€è‰²å™¨æ›¿ä»£äº†ä¼ ç»Ÿçš„å›ºå®šæ¸²æŸ“ç®¡çº¿ï¼Œå¯ä»¥å®ç°3Då›¾å½¢å­¦è®¡ç®—ä¸­çš„ç›¸å…³è®¡ç®—ï¼Œç”±äºå…¶å¯ç¼–è¾‘æ€§ï¼Œå¯ä»¥å®ç°å„ç§å„æ ·çš„å›¾åƒæ•ˆæœè€Œä¸ç”¨å—æ˜¾å¡çš„å›ºå®šæ¸²æŸ“ç®¡çº¿é™åˆ¶ã€‚</p>
</blockquote>
<p>åº”è¯¥å°±æ˜¯å¯ä»¥é€šè¿‡ç¼–ç¨‹æ–¹å¼æ”¹å˜ç”»é¢å±•ç°å‡ºæ¥çš„æ•ˆæœï¼Œæ¯”å¦‚å›¾ç‰‡åŸæœ¬æ˜¯å½©è‰²çš„ï¼Œä½ å¯ä»¥é€šè¿‡shaderæ”¹å˜è¿è¡Œåå±•ç¤ºå‡ºæ¥çš„é¢œè‰²ä¸ºç°è‰²ã€‚shaderæˆ‘çœ‹è¿‡ä¸€äº›godotçš„å®ç°æ•ˆæœï¼Œåªèƒ½è¯´å¾ˆå¼ºå¤§ï¼Œåœ¨å®ç°ä¸€äº›ç‰¹æ®Šç”»é¢ç‰¹æ•ˆæ—¶éå¸¸æœ‰ç”¨ï¼Œæˆ‘è¿˜å¾—å¤šçœ‹çœ‹ç›¸å…³èµ„æ–™å­¦ä¹ ä¸€ä¸‹ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨<code>Sprite</code>ä¸Šæ‰¾åˆ°Materialï¼Œç„¶åæ–°å»ºä¸€ä¸ª<code>ShaderMaterial &gt; Shader</code>ï¼Œç„¶åå°±å¯ä»¥ç¼–å†™ç€è‰²å™¨ä»£ç äº†ã€‚</p>
<p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code># å®šä¹‰shaderç±»å‹ï¼Œè¿™ä¸ªæ—¶å›ºå®šçš„å¥½åƒ
shader_type canvas_item;

# å®šä¹‰shaderçš„å¤–éƒ¨å‚æ•°ï¼Œæ–¹ä¾¿è°ƒè¯•ä»€ä¹ˆçš„ï¼ŒæŒ‡å®šå®ƒçš„ç±»å‹ä¸ºhint_colorï¼Œå¤–éƒ¨åœ¨è®¾ç½®çš„æ—¶å€™å¯ä»¥è°ƒç”¨ç³»ç»Ÿçš„å–è‰²æ¿
uniform vec4 tint_color: hint_color = vec4(1.0);

# è¿™ä¸ªæ˜¯ä¸»å…¥å£å‡½æ•°ï¼Œé‡Œé¢çš„å†…å®¹å°±æ˜¯åœ¨å¯¹æ¯ä¸€ä¸ªåƒç´ ç‚¹çš„å¤„ç†æ–¹å¼ã€‚
void fragment()
{
	# åœ¨ä¸€ä¸ªå›¾ç‰‡é‡Œæ¯ä¸€ä¸ªåƒç´ éƒ½æœ‰è‡ªå·±çš„åæ ‡ï¼Œè¿™é‡Œæ˜¯è·å–å½“å‰å›¾ç‰‡çš„é¢œè‰²åæ ‡
	vec4 col = texture(TEXTURE, UV);
	# é€šè¿‡ç®—æ³•è®²æ¯ä¸ªåƒç´ æ¢ç®—æˆç°è‰²
	float grey = (col.r + col.g + col.b) / 3.0;
	# è¿™ä¸ªUPè¯´æ˜¯è‰²é˜¶çš„å¤„ç†ï¼Œä»å¤šå°‘è¿‡æ¸¡åˆ°å¤šå°‘ï¼ˆå¤§æ¦‚ï¼‰
	grey = smoothstep(0.3, 0.6, grey) * 0.4 + 0.6;
	# æŠŠè®¡ç®—å‡ºæ¥çš„é¢œè‰²ç»™ä¸è´´å›¾
	COLOR = vec4(grey * tint_color.rgb, col.a);
}
</code></pre>
<p>æœ€åæ•ˆæœå°±æ˜¯è¿™æ ·ï¼Œè¿˜æŒºå¸…çš„ã€‚</p>
<p><img src="https://cdn.1900.live/typora/%E7%AC%AC%E4%B8%83%E8%AF%BE_trail_shader.gif" alt="ç¬¬ä¸ƒè¯¾_trail_shader" loading="lazy"></p>
<h2 id>å¢åŠ é£è¡Œæ•Œäºº</h2>
<p>è¿™é‡ŒUPæœç„¶å°†Slimeä¸Šä¸€äº›å…±æœ‰å±æ€§æå–åˆ°Enmeyä¸Šå»äº†ã€‚è‹è‡ä½œä¸ºæ€ªç‰©è‡ªç„¶ä¹Ÿè¦ç»§æ‰¿è‡ªEnmeyè„šæœ¬ï¼Œå¹¶ä¸”ä¹Ÿæ›´æ”¹äº†ç§»åŠ¨æ–¹å¼ã€‚å¹¶é€šè¿‡ä¸€ä¸ª<code>Area2D</code>æ£€æµ‹æ•Œäººçš„èŒƒå›´ã€‚</p>
<p><img src="https://cdn.1900.live/typora/image-20201226004615966.png" alt="image-20201226004615966" loading="lazy"></p>
<p>ä½†æ˜¯å’ŒSlimeä¸ä¸€æ ·çš„æ˜¯ï¼Œè¿™ä¸ªé£è¡Œæ€ªç‰©æ˜¯ä¼šé£çš„ï¼Œæ‰€ä»¥ç§»åŠ¨é€»è¾‘å’Œåœ°å½¢iè¡Œèµ°çš„å®Œå…¨ä¸ä¸€æ ·ã€‚ä¹Ÿä¸ä¼šå—yè½´çš„é‡åŠ›å½±å“ï¼Œæ‰€ä»¥è¿™é‡Œä»£ç éƒ¨åˆ†æ”¹äº†å¾ˆå¤šã€‚è€Œä¸”è¿˜æœ‰è­¦æˆ’åŒºåŸŸ.</p>
<p>è¿™é‡Œæœ‰ä¸€äº›ä»£ç æœ‰ç‚¹ä¸€çŸ¥åŠè§£</p>
<pre><code class="language-python">extends &quot;res://src/enemies/Enemy.gd&quot;

var target_posistion = null

onready var player_sensor = $PlayerSensor


func _process(delta):
    if is_dead:
        # æ­»åä¸åœ¨ç§»åŠ¨
        velocity.x = 0
        # ä¸”å¢åŠ å¢åŠ é‡åŠ›å½±å“
        velocity.y += gravity * delta
    else:
        # è®¡ç®—å¹¶æ›´æ–°ç›®æ ‡ä½ç½®
        target_posistion = _calc_target_position()
        if target_posistion == null:
            # å¦‚æœæ²¡æœ‰æ–°çš„ç›®æ ‡ä½ç½®å°±åªç§»åŠ¨åˆ°ç›®æ ‡ä½ç½®å»
            velocity = velocity.move_toward(Vector2.ZERO, acceleration * delta)
        else:
            # è·å–è‡ªèº«åˆ°ç›®æ ‡ä½ç½®çš„å‘é‡
            var direction = global_position.direction_to(target_posistion)
            # æ ¹æ®ç›®æ ‡å‘é‡è¿›è¡Œç§»åŠ¨
            velocity = velocity.move_toward(direction * max_speed, acceleration * delta)
            # è½¬èº«
            sprite.flip_h = direction.x &gt; 0
  
func _physics_process(_delta):
    # ç§»åŠ¨
    velocity = move_and_slide(velocity)

func _calc_target_position():
    # è·å¾—æ‰€æœ‰ç¢°æ’åŒºå†…çš„å¯¹è±¡æ•°ç»„ï¼Œå› ä¸ºåªæœ‰æœ‰äº›è§’è‰²èƒ½å’Œä»–ç¢°æ’ï¼Œæ‰€ä»¥åªè¦æœ‰æ•°æ®å°±æ˜¯æ¸¸æˆè§’è‰²
    var bodies = player_sensor.get_overlapping_bodies()
    #å¦‚æœæœ‰çš„è¯å°±æ›´æ–°ç›®æ ‡ä½ç½®
    if not bodies.empty():
        # è¿”å›æ–°çš„ç›®æ ‡ä½ç½®
        return bodies[0].global_position + Vector2(0, 50) 
    # è¿™é‡Œå¤§æ¦‚æ„æ€å¦‚æœç¦»ç›®æ ‡è·ç¦»å¤ªè¿œä¹Ÿä¸è¿½è¸ªäº†ï¼Œä¸è¿‡ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦è®¾ç½®æˆ25
    if target_posistion != null and global_position.distance_squared_to(target_posistion) &lt; 25:
        print(global_position.distance_squared_to(target_posistion))
        return null
	
    return target_posistion
</code></pre>
<p>å¥½äº†ï¼Œå¤§æ¦‚æ•ˆæœå¦‚ä¸‹</p>
<p><img src="https://cdn.1900.live/typora/%E7%AC%AC%E4%B8%83%E8%AF%BE_fly_enemy.gif" alt="ç¬¬ä¸ƒè¯¾_fly_enemy" loading="lazy"></p>
<!--kg-card-end: markdown--></article></div><div class="footer"><div><p>
          Built with
          <a target="_blank" href="//gridsome.org" class="link">Gridsome</a>
          &amp; Made with â¤ï¸ by
          <a target="_blank" href="//alex.design" class="link">Alex Brown</a></p></div><div class="footer-links"><a target="_blank" href="/sitemap.xml">Sitemap</a><a target="_blank" href="/feed.xml">RSS Feed</a></div></div></div></main>
    <script>window.__INITIAL_STATE__={"data":{"metadata":{"siteName":"åªæ˜¯ç©ç© | JUST FUN","siteDescription":"\u002Fgridsome-blog"},"post":{"id":"63158312cf533d1c2cf29b3d","title":"Godotæ¸¸æˆå¼•æ“å­¦ä¹  ç¬¬ä¸ƒè¯¾","content":"\u003C!--kg-card-begin: markdown--\u003E\u003Cp\u003Eä»Šå¤©æ˜¯åœ£è¯èŠ‚ï¼Œæœ‹å‹åœˆé‡Œçƒ­çƒ­é—¹é—¹çš„è®©æˆ‘æ„Ÿè§‰å…¨ä¸–ç•Œéƒ½å†è¿‡åœ£è¯èŠ‚ï¼Œå›å®¶çš„ä¸€è·¯ä¸Šä¹Ÿæ ¼å¤–å†·æ¸…ï¼Œç›¸æ¯”éƒ½å»è´­ç‰©ä¸­å¿ƒæˆ–è€…åƒå–ç©ä¹ä¸€æ¡è¡—è¿‡åœ£è¯èŠ‚å»äº†æŠŠã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eä»Šå¤©ç»§ç»­å­¦ä¹ Godotï¼ŒUPä»Šå¤©è®²çš„æ˜¯å®ç°å¾ˆå¤šåŠ¨ä½œæ¸¸æˆä¸­çš„\u003Ccode\u003Eæ®‹å½±æ•ˆæœ\u003C\u002Fcode\u003Eï¼Œå¯¹è¿™ä¸ªå°è±¡æœ€æ·±åˆ»çš„æ˜¯ä»¥å‰çœ‹é»‘å®¢å¸å›½æ—¶å€™ï¼Œå²å¯†æ–¯çš„é‚£ä¸ªèº²å­å¼¹çš„æ®‹å½±å¤ªå¸…äº†ï¼Œåº”è¯¥ç®—æ˜¯ååœºé¢äº†å§ï¼å¥½äº†ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œå¼€å¹²ã€‚\u003C\u002Fp\u003E\n\u003Ch2 id\u003Eç»™è§’è‰²æ·»åŠ æ®‹å½±\u003C\u002Fh2\u003E\n\u003Cp\u003Eå…¶å®æˆ‘ä¹‹å‰çœ‹\u003Ca href=\"https:\u002F\u002Fspace.bilibili.com\u002F58449087\u002F?ref=1900.live\"\u003ECarotaa666\u003C\u002Fa\u003Eçš„ç›´æ’­çš„æ—¶å€™çœ‹åˆ°ä»–è¯´è¿‡è¿™ä¸ªæ€è·¯ï¼Œå¤§æ¦‚æ˜¯é€šè¿‡è®¡æ—¶å™¨æŒ‰ä¸€å®šçš„å‘¨æœŸç»˜åˆ¶ä¸€ä¸ªç²¾çµï¼Œç„¶åå†é”€æ¯æ‰ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eè¿™é‡ŒUPä¸»çš„æ€è·¯ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå…ˆæ–°å»ºä¸€ä¸ªåœºæ™¯åä¸º\u003Ccode\u003ETrail\u003C\u002Fcode\u003Eå†é‡Œé¢æ·»åŠ ä¸€ä¸ªSpriteèŠ‚ç‚¹ï¼Œå’Œä¸€ä¸ª\u003Ccode\u003EAnimationPlayer\u003C\u002Fcode\u003Eï¼Œåˆ©ç”¨æˆ‘ä»¬ä»¥å‰çš„å­¦çš„ï¼Œæ·»åŠ ä¸€ä¸ªåä¸º\u003Ccode\u003Efadeout\u003C\u002Fcode\u003Eçš„æ¸éšåŠ¨ç”»ï¼Œå¹¶è®©åŠ¨ç”»åœ¨ä¸€å®šæ—¶é—´åè‡ªæˆ‘é”€æ¯ï¼Œç„¶åè®¾ç½®ä»æ¸…æ™°åˆ°æ¨¡ç³Šçš„æ¸å˜ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.1900.live\u002Ftypora\u002Fimage-20201225220650839.png\" alt=\"image-20201225220650839\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Eç„¶åç»™\u003Ccode\u003EPlayer\u003C\u002Fcode\u003Eåœºæ™¯æ·»åŠ ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œç„¶åå°±æ˜¯ä»£ç éƒ¨åˆ†äº†ã€‚è¿™é‡Œè¯´åˆ°ä¸€ä¸ªä»¥åå¯èƒ½ä¼šç»å¸¸ç”¨çš„å‡½æ•°\u003Ccode\u003Epreload\u003C\u002Fcode\u003Eï¼Œå…·ä½“çœ‹ä»£ç ï¼Œæˆ‘éƒ½å†™äº† æ³¨é‡Šäº†ã€‚\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-python\"\u003E# è¿æ¥è®¡æ—¶å™¨çš„Timeroutä¿¡å·\t\nfunc _on_TrailTimer_timeout():\n\t# å¦‚æœè§’è‰²æ²¡æœ‰ç§»åŠ¨ï¼Œåˆ™ä¸ç»˜åˆ¶å½±å­\n\tif velocity.x == 0:\n\t\treturn\n\t\n\t# ç”¨preloadé¢„åŠ è½½æˆ‘ä»¬åšçš„é‚£ä¸ªå½±å­åœºæ™¯ï¼Œå¹¶å®ä¾‹åŒ–\n\tvar trail = preload(&quot;res:\u002F\u002Fsrc\u002Feffects\u002FTrail.tscn&quot;).instance()\n\t# æŠŠå®ƒæ·»åŠ è¿›çˆ¶åœºæ™¯\n\tget_parent().add_child(trail)\n\t# æ”¹å˜å®ƒåœ¨åœºæ™¯æ ‘ä¸­çš„ä½ç½®åˆ°playerä¸‹æ–¹\n\tget_parent().move_child(trail, get_index())\n\n\t# ä¸‹é¢è¿™äº›å±æ€§æ˜¯è¦ä»è§’è‰²ä¸Šè¯»å–å‡ºæ¥å¤åˆ¶ç»™å½±å­çš„\n\tvar properties = [\n\t\t&quot;hframes&quot;,\n\t\t&quot;vframes&quot;,\n\t\t&quot;frame&quot;,\n\t\t&quot;texture&quot;,\n\t\t&quot;global_position&quot;,\n\t\t&quot;flip_h&quot;\n\t]\n\t# ä»è§’è‰²èº«ä¸Šéå†ï¼Œå¹¶ç»™ä¸å½±å­\n\tfor name in  properties:\n\t\ttrail.set(name, sprite.get(name))\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch2 id=\"shader\"\u003Eç¬¬ä¸€æ¬¡äº†è§£Shader\u003C\u002Fh2\u003E\n\u003Cp\u003Eè¿™é‡Œè¿˜è¯´äº†shaderï¼Œä»€ä¹ˆæ˜¯shaderï¼Ÿæˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦ï¼Œä»¥å‰ç©ç»åœ°æ±‚ç”Ÿçš„ä¸ºäº†æ”¹å˜ç”»è´¨ç”¨è¿‡ä¸€æ¬¡ï¼Œä¸è¿‡å®Œå…¨ä¸çŸ¥é“æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼›\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003Eç€è‰²å™¨ï¼ˆShaderï¼‰æ˜¯ç”¨æ¥å®ç°\u003Ca href=\"https:\u002F\u002Fbaike.baidu.com\u002Fitem\u002F%E5%9B%BE%E5%83%8F%E6%B8%B2%E6%9F%93\u002F22031608?ref=1900.live\"\u003Eå›¾åƒæ¸²æŸ“\u003C\u002Fa\u003Eçš„ï¼Œç”¨æ¥æ›¿ä»£å›ºå®šæ¸²æŸ“ç®¡çº¿çš„å¯ç¼–è¾‘ç¨‹åºã€‚å…¶ä¸­Vertex Shaderä¸»è¦è´Ÿè´£é¡¶ç‚¹çš„å‡ ä½•å…³ç³»ç­‰çš„è¿ç®—ï¼ŒPixel Shaderä¸»è¦è´Ÿè´£ç‰‡æºé¢œè‰²ç­‰çš„è®¡ç®—ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eç€è‰²å™¨æ›¿ä»£äº†ä¼ ç»Ÿçš„å›ºå®šæ¸²æŸ“ç®¡çº¿ï¼Œå¯ä»¥å®ç°3Då›¾å½¢å­¦è®¡ç®—ä¸­çš„ç›¸å…³è®¡ç®—ï¼Œç”±äºå…¶å¯ç¼–è¾‘æ€§ï¼Œå¯ä»¥å®ç°å„ç§å„æ ·çš„å›¾åƒæ•ˆæœè€Œä¸ç”¨å—æ˜¾å¡çš„å›ºå®šæ¸²æŸ“ç®¡çº¿é™åˆ¶ã€‚\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003Eåº”è¯¥å°±æ˜¯å¯ä»¥é€šè¿‡ç¼–ç¨‹æ–¹å¼æ”¹å˜ç”»é¢å±•ç°å‡ºæ¥çš„æ•ˆæœï¼Œæ¯”å¦‚å›¾ç‰‡åŸæœ¬æ˜¯å½©è‰²çš„ï¼Œä½ å¯ä»¥é€šè¿‡shaderæ”¹å˜è¿è¡Œåå±•ç¤ºå‡ºæ¥çš„é¢œè‰²ä¸ºç°è‰²ã€‚shaderæˆ‘çœ‹è¿‡ä¸€äº›godotçš„å®ç°æ•ˆæœï¼Œåªèƒ½è¯´å¾ˆå¼ºå¤§ï¼Œåœ¨å®ç°ä¸€äº›ç‰¹æ®Šç”»é¢ç‰¹æ•ˆæ—¶éå¸¸æœ‰ç”¨ï¼Œæˆ‘è¿˜å¾—å¤šçœ‹çœ‹ç›¸å…³èµ„æ–™å­¦ä¹ ä¸€ä¸‹ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eæˆ‘ä»¬å¯ä»¥åœ¨\u003Ccode\u003ESprite\u003C\u002Fcode\u003Eä¸Šæ‰¾åˆ°Materialï¼Œç„¶åæ–°å»ºä¸€ä¸ª\u003Ccode\u003EShaderMaterial &gt; Shader\u003C\u002Fcode\u003Eï¼Œç„¶åå°±å¯ä»¥ç¼–å†™ç€è‰²å™¨ä»£ç äº†ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003Eå…·ä½“ä»£ç å¦‚ä¸‹ï¼š\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode\u003E# å®šä¹‰shaderç±»å‹ï¼Œè¿™ä¸ªæ—¶å›ºå®šçš„å¥½åƒ\nshader_type canvas_item;\n\n# å®šä¹‰shaderçš„å¤–éƒ¨å‚æ•°ï¼Œæ–¹ä¾¿è°ƒè¯•ä»€ä¹ˆçš„ï¼ŒæŒ‡å®šå®ƒçš„ç±»å‹ä¸ºhint_colorï¼Œå¤–éƒ¨åœ¨è®¾ç½®çš„æ—¶å€™å¯ä»¥è°ƒç”¨ç³»ç»Ÿçš„å–è‰²æ¿\nuniform vec4 tint_color: hint_color = vec4(1.0);\n\n# è¿™ä¸ªæ˜¯ä¸»å…¥å£å‡½æ•°ï¼Œé‡Œé¢çš„å†…å®¹å°±æ˜¯åœ¨å¯¹æ¯ä¸€ä¸ªåƒç´ ç‚¹çš„å¤„ç†æ–¹å¼ã€‚\nvoid fragment()\n{\n\t# åœ¨ä¸€ä¸ªå›¾ç‰‡é‡Œæ¯ä¸€ä¸ªåƒç´ éƒ½æœ‰è‡ªå·±çš„åæ ‡ï¼Œè¿™é‡Œæ˜¯è·å–å½“å‰å›¾ç‰‡çš„é¢œè‰²åæ ‡\n\tvec4 col = texture(TEXTURE, UV);\n\t# é€šè¿‡ç®—æ³•è®²æ¯ä¸ªåƒç´ æ¢ç®—æˆç°è‰²\n\tfloat grey = (col.r + col.g + col.b) \u002F 3.0;\n\t# è¿™ä¸ªUPè¯´æ˜¯è‰²é˜¶çš„å¤„ç†ï¼Œä»å¤šå°‘è¿‡æ¸¡åˆ°å¤šå°‘ï¼ˆå¤§æ¦‚ï¼‰\n\tgrey = smoothstep(0.3, 0.6, grey) * 0.4 + 0.6;\n\t# æŠŠè®¡ç®—å‡ºæ¥çš„é¢œè‰²ç»™ä¸è´´å›¾\n\tCOLOR = vec4(grey * tint_color.rgb, col.a);\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eæœ€åæ•ˆæœå°±æ˜¯è¿™æ ·ï¼Œè¿˜æŒºå¸…çš„ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.1900.live\u002Ftypora\u002F%E7%AC%AC%E4%B8%83%E8%AF%BE_trail_shader.gif\" alt=\"ç¬¬ä¸ƒè¯¾_trail_shader\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Ch2 id\u003Eå¢åŠ é£è¡Œæ•Œäºº\u003C\u002Fh2\u003E\n\u003Cp\u003Eè¿™é‡ŒUPæœç„¶å°†Slimeä¸Šä¸€äº›å…±æœ‰å±æ€§æå–åˆ°Enmeyä¸Šå»äº†ã€‚è‹è‡ä½œä¸ºæ€ªç‰©è‡ªç„¶ä¹Ÿè¦ç»§æ‰¿è‡ªEnmeyè„šæœ¬ï¼Œå¹¶ä¸”ä¹Ÿæ›´æ”¹äº†ç§»åŠ¨æ–¹å¼ã€‚å¹¶é€šè¿‡ä¸€ä¸ª\u003Ccode\u003EArea2D\u003C\u002Fcode\u003Eæ£€æµ‹æ•Œäººçš„èŒƒå›´ã€‚\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.1900.live\u002Ftypora\u002Fimage-20201226004615966.png\" alt=\"image-20201226004615966\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Eä½†æ˜¯å’ŒSlimeä¸ä¸€æ ·çš„æ˜¯ï¼Œè¿™ä¸ªé£è¡Œæ€ªç‰©æ˜¯ä¼šé£çš„ï¼Œæ‰€ä»¥ç§»åŠ¨é€»è¾‘å’Œåœ°å½¢iè¡Œèµ°çš„å®Œå…¨ä¸ä¸€æ ·ã€‚ä¹Ÿä¸ä¼šå—yè½´çš„é‡åŠ›å½±å“ï¼Œæ‰€ä»¥è¿™é‡Œä»£ç éƒ¨åˆ†æ”¹äº†å¾ˆå¤šã€‚è€Œä¸”è¿˜æœ‰è­¦æˆ’åŒºåŸŸ.\u003C\u002Fp\u003E\n\u003Cp\u003Eè¿™é‡Œæœ‰ä¸€äº›ä»£ç æœ‰ç‚¹ä¸€çŸ¥åŠè§£\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-python\"\u003Eextends &quot;res:\u002F\u002Fsrc\u002Fenemies\u002FEnemy.gd&quot;\n\nvar target_posistion = null\n\nonready var player_sensor = $PlayerSensor\n\n\nfunc _process(delta):\n    if is_dead:\n        # æ­»åä¸åœ¨ç§»åŠ¨\n        velocity.x = 0\n        # ä¸”å¢åŠ å¢åŠ é‡åŠ›å½±å“\n        velocity.y += gravity * delta\n    else:\n        # è®¡ç®—å¹¶æ›´æ–°ç›®æ ‡ä½ç½®\n        target_posistion = _calc_target_position()\n        if target_posistion == null:\n            # å¦‚æœæ²¡æœ‰æ–°çš„ç›®æ ‡ä½ç½®å°±åªç§»åŠ¨åˆ°ç›®æ ‡ä½ç½®å»\n            velocity = velocity.move_toward(Vector2.ZERO, acceleration * delta)\n        else:\n            # è·å–è‡ªèº«åˆ°ç›®æ ‡ä½ç½®çš„å‘é‡\n            var direction = global_position.direction_to(target_posistion)\n            # æ ¹æ®ç›®æ ‡å‘é‡è¿›è¡Œç§»åŠ¨\n            velocity = velocity.move_toward(direction * max_speed, acceleration * delta)\n            # è½¬èº«\n            sprite.flip_h = direction.x &gt; 0\n  \nfunc _physics_process(_delta):\n    # ç§»åŠ¨\n    velocity = move_and_slide(velocity)\n\nfunc _calc_target_position():\n    # è·å¾—æ‰€æœ‰ç¢°æ’åŒºå†…çš„å¯¹è±¡æ•°ç»„ï¼Œå› ä¸ºåªæœ‰æœ‰äº›è§’è‰²èƒ½å’Œä»–ç¢°æ’ï¼Œæ‰€ä»¥åªè¦æœ‰æ•°æ®å°±æ˜¯æ¸¸æˆè§’è‰²\n    var bodies = player_sensor.get_overlapping_bodies()\n    #å¦‚æœæœ‰çš„è¯å°±æ›´æ–°ç›®æ ‡ä½ç½®\n    if not bodies.empty():\n        # è¿”å›æ–°çš„ç›®æ ‡ä½ç½®\n        return bodies[0].global_position + Vector2(0, 50) \n    # è¿™é‡Œå¤§æ¦‚æ„æ€å¦‚æœç¦»ç›®æ ‡è·ç¦»å¤ªè¿œä¹Ÿä¸è¿½è¸ªäº†ï¼Œä¸è¿‡ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦è®¾ç½®æˆ25\n    if target_posistion != null and global_position.distance_squared_to(target_posistion) &lt; 25:\n        print(global_position.distance_squared_to(target_posistion))\n        return null\n\t\n    return target_posistion\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eå¥½äº†ï¼Œå¤§æ¦‚æ•ˆæœå¦‚ä¸‹\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.1900.live\u002Ftypora\u002F%E7%AC%AC%E4%B8%83%E8%AF%BE_fly_enemy.gif\" alt=\"ç¬¬ä¸ƒè¯¾_fly_enemy\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003C!--kg-card-end: markdown--\u003E","date":"25 December 2020","path":"godot_learning_lesson_7_game_engine"}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.86bb94d9.js" defer></script><script src="/assets/js/page--src--templates--ghost-post-vue.0de93747.js" defer></script>
  </body>
</html>