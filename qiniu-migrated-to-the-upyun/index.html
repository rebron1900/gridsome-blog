<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>只是玩玩 | JUST FUN - 只是玩玩 | JUST FUN</title><meta name="gridsome:hash" content="79ad4906a93b028ce0cc44a61d77049cbbf31c8d"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="Hello"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/gridsome-blog/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/gridsome-blog/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/gridsome-blog/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/gridsome-blog/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/gridsome-blog/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/gridsome-blog/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/gridsome-blog/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/gridsome-blog/assets/static/favicon.7b22250.9bb7ffafafc09ac851d81afb65b8ef59.png"><link rel="preload" href="/gridsome-blog/assets/css/0.styles.be694e5c.css" as="style"><link rel="preload" href="/gridsome-blog/assets/js/app.32f9dac0.js" as="script"><link rel="preload" href="/gridsome-blog/assets/js/page--src--templates--ghost-post-vue.0de93747.js" as="script"><link rel="prefetch" href="/gridsome-blog/assets/js/6.4b802b1d.js"><link rel="prefetch" href="/gridsome-blog/assets/js/page--node-modules--gridsome--app--pages--404-vue.5fb9a6b8.js"><link rel="prefetch" href="/gridsome-blog/assets/js/page--src--pages--index-copy-vue.caed7301.js"><link rel="prefetch" href="/gridsome-blog/assets/js/page--src--pages--index-vue.eb311bfb.js"><link rel="stylesheet" href="/gridsome-blog/assets/css/0.styles.be694e5c.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body  class="darkmode">
    <main role="main" data-server-rendered="true" id="app" class="container"><div class="row"><header class="header"><a href="/gridsome-blog/" class="active"><h1>👨‍💻 只是玩玩 | JUST FUN</h1></a><!----></header><div class="article"><h1 class="article-title">全站HTTPS 【1】：为了薅羊毛七牛迁移到又拍云</h1><p class="article-date"> 4 September 2022 · <i> min read</i></p><article><p>一直以来本站都是使用的Http协议，之前也有想过搞全站Https，但是七牛的Https流量并不纳入免费额度里面，所以如果用的话就意味着薅不到羊毛了。</p><p>不过七牛虽然不免费，但是又拍云可以，这两家云储存可以说是所有博友基本上都了解过的平台，又拍云也有一个推广联盟的优惠，每月有10G的免费储存空间+15GB的免费流量，这不比七牛香？但是那段时间事情多，迁移好像还比较麻烦，所以就一直搁置了，今天忽然脑子发热就顺手想开始着手搞这件事，所以写篇文章记录一下。</p><div class="kg-card kg-callout-card kg-callout-card-white"><div class="kg-callout-emoji">🎁</div><div class="kg-callout-text">欢迎使用我的邀请链接注册，你能获得61元的免费代金券，以及首充返利10%的优惠：<a href="https://console.upyun.com/register/?invite=9H59vHqjD&ref=1900.live">https://console.upyun.com/register/?invite=9H59vHqjD</a></div></div><h3 id="%E7%94%B3%E8%AF%B7%E6%88%90%E4%B8%BA%E5%8F%88%E6%8B%8D%E4%BA%91%E5%A4%A7%E4%BD%BF">申请成为又拍云大使</h3><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://www.upyun.com/league?ref=1900.live"><div class="kg-bookmark-content"><div class="kg-bookmark-title">又拍云联盟 - 开发者帮助计划，为开发者加速 - 又拍云</div><div class="kg-bookmark-description">又拍云联盟是由又拍云推出的开发者帮助计划，对开发者提供免费且完善的云存储、CDN等服务，加速个人网站、博客、APP等项目</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="https://www.upyun.com/static/favicon-64x64.png" alt><span class="kg-bookmark-author">又拍云</span></div></div><div class="kg-bookmark-thumbnail"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYxLjIgKDg5NjUzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT5DRE48L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0i6aG16Z2iLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLlr7zoiKrkuIvmi4noj5zljZXkuqflk4EtMTjkuKoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00MDAuMDAwMDAwLCAtMTMwLjAwMDAwMCkiIHN0cm9rZT0iIzMzMzMzMyIgc3Ryb2tlLXdpZHRoPSIwLjgiPgogICAgICAgICAgICA8ZyBpZD0i57yW57uELTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQwMC4wMDAwMDAsIDEzMC4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSLlr7zoiKrooajljZUiPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJDRE4tSUNPTiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJDRE4iIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMDAwMDAwLCAxLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBpZD0i5qSt5ZyG5b2iIiBjeD0iNiIgY3k9IjYiIHI9IjIuNiI+PC9jaXJjbGU+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Y2lyY2xlIGlkPSLmpK3lnIblvaLlpIfku70iIGN4PSIxMC41IiBjeT0iMS41IiByPSIxLjUiPjwvY2lyY2xlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBpZD0i5qSt5ZyG5b2i5aSH5Lu9LTQiIGN4PSIxLjUiIGN5PSIxMC41IiByPSIxLjUiPjwvY2lyY2xlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Iue8lue7hC0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2LjAwMDAwMCwgNi4wMDAwMDApIHNjYWxlKDEsIC0xKSB0cmFuc2xhdGUoLTYuMDAwMDAwLCAtNi4wMDAwMDApICI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Iue8lue7hCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjaXJjbGUgaWQ9IuakreWchuW9ouWkh+S7vSIgY3g9IjEwLjUiIGN5PSIxLjUiIHI9IjEuNSI+PC9jaXJjbGU+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjaXJjbGUgaWQ9IuakreWchuW9ouWkh+S7vS00IiBjeD0iMS41IiBjeT0iMTAuNSIgcj0iMS41Ij48L2NpcmNsZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0i57yW57uELTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMDI1MTI2LCAyLjUyNTEyNikiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjQzODkyNjUzLDAuMDEwODIwOTM3MSBMNS44NDExMzg5NiwxLjYwODYwODUxIE0yLjAzNzA3OTc1LDUuNDEyNjY3NzIgTDAuNDM1MDU3NzkxLDcuMDE0Njg5NjgiIGlkPSLlvaLnirYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy41NDcxNDUyMiw3LjA0NzE0NTIyIEw1LjgwNjczNzU5LDUuMzA2NzM3NTkgTTIuMDY5OTkyNTUsMS41Njk5OTI1NSBMMC41MTAxNjgwOTYsMC4wMTAxNjgwOTU3IiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg&#x3D;&#x3D;" alt></div></a></figure><p>点击上面这个链接即可跳转又拍云官方网站，先注册账号，并在你的博客上挂上他们的链接后填写申请即可。可能要等一会儿，我当时好像是隔天才审核通过，不过有可能是因为周末的原因？</p><figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption"><img src="https://cdn.1900.live/assets/2022/09/04Snipaste_2022-09-04_12-12-44.jpg" class="kg-image" alt loading="lazy" width="1170" height="625"><figcaption>又拍云联盟</figcaption></figure><h3 id="%E4%B8%8B%E8%BD%BD%E4%B8%83%E7%89%9B%E4%BA%91%E6%95%B0%E6%8D%AE">下载七牛云数据</h3><p>起初担心自己弄会不会导致导出的文件前缀不对最后因为数据错乱无法访问，不过后来我看了下七牛的一些介绍，发现这些所谓的前缀其实就新建了文件夹，导出后也是以文件夹格式存储的，如： <code>imgs/</code> 前缀，其实就是上传到名为 <code>imgs</code> 的文件夹里，这样就能放心弄了，只要文件夹层级结构一致即可。</p><p>在迁移七牛云的数据之前我在网络上搜索了一下，发现没有什么现成的工具可以一键完成迁移操作。</p><p>我也写了个工单问了一下又拍云的工作人员，发现只能通过最原始的方式：先把七牛的下下来，再传上又拍云。</p><figure class="kg-card kg-image-card kg-width-wide kg-card-hascaption"><img src="https://cdn.1900.live/assets/2022/09/04Snipaste_2022-09-04_12-18-39.jpg" class="kg-image" alt loading="lazy" width="820" height="772"><figcaption>又拍云客服答复</figcaption></figure><p>目前找到的资料都是利用七牛开发者中心的 <code>qshell</code> 工具将所有文件下载下来，再重新上传到其他平台。</p><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://developer.qiniu.com/kodo/1302/qshell?ref=1900.live"><div class="kg-bookmark-content"><div class="kg-bookmark-title">命令行工具(qshell)_实用工具_对象存储 - 七牛开发者中心</div><div class="kg-bookmark-description">qshell 工具文档</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="https://qiniu.staticfile.org/favicon.ico" alt><span class="kg-bookmark-author">开发者中心</span></div></div><div class="kg-bookmark-thumbnail"><img src="https://developer.qiniu.com/assets/logo-white-b90d685a6b146884636382426d11b7236f5f7ca1c5dfafdb6fa777a0f976fc1f.png" alt></div></a></figure><h4 id="%E5%AE%89%E8%A3%85qshell">安装qshell</h4><p>我是windows平台，安装的方法有两种一种是直接再目录里执行exe程序，另外一种方法把Bin路径添加到系统Path里。</p><p>第一种</p><figure class="kg-card kg-code-card"><pre><code class="language-bash">##假设qshell下载后解压在D盘的qshell目录里
D:
cd qshell
qshell.exe qdownload -c 10 "配置文件路径"</code></pre><figcaption>直接执行exe文件</figcaption></figure><p>第二种</p><p>打开系统属性环境变量 <code>我的电脑上右键 &gt; 属性 &gt; 高级系统设置 &gt; 高级选项卡 &gt; 环境变量按钮</code> 即可。</p><figure class="kg-card kg-gallery-card kg-width-wide kg-card-hascaption"><div class="kg-gallery-container"><div class="kg-gallery-row"><div class="kg-gallery-image"><img src="https://cdn.1900.live/assets/2022/09/04Snipaste_2022-09-04_12-35-53.jpg" width="618" height="659" loading="lazy" alt></div><div class="kg-gallery-image"><img src="https://cdn.1900.live/assets/2022/09/04Snipaste_2022-09-04_12-36-44.jpg" width="527" height="563" loading="lazy" alt></div></div></div><figcaption>修改环境变量</figcaption></figure><h4 id="%E5%88%9B%E5%BB%BA%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">创建配置文件</h4><p>然后在同目录下新建一个用于下载时调用的配置文件 <code>qdisk_down.conf</code> ，里面设置了本地文件的存放路径，远端Bucket的名字、只下载指定的文件等等。我的配置如下，我这没有限制后缀，可以把所有的文件全都下载下来。</p><figure class="kg-card kg-code-card"><pre><code class="language-json">{
    "dest_dir"               :   "本地数据备份路径，为全路径",
    "bucket"                 :   "空间名称",
    "check_hash"             :   false,
    "cdn_domain"             :   "设置下载的 CDN 域名，默认为空表示从存储源站下载，【该功能默认需要计费，如果希望享受 10G 的免费流量，请自行设置 cdn_domain 参数，如不设置，需支付源站流量费用，无法减免！！！】",
    "public"                 :   true
}</code></pre><figcaption>批量下载的配置文件</figcaption></figure><div class="kg-card kg-callout-card kg-callout-card-grey"><div class="kg-callout-emoji">🗒️</div><div class="kg-callout-text">具体的配置参数中文说明可以看这里：<br><a href="https://github.com/qiniu/qshell/blob/master/docs/qdownload.md?ref=1900.live#%E9%80%89%E9%A1%B9">https://github.com/qiniu/qshell/blob/master/docs/qdownload.md#%E9%80%89%E9%A1%B9</a></div></div><h4 id="%E6%89%A7%E8%A1%8C%E4%B8%8B%E8%BD%BD%E5%91%BD%E4%BB%A4">执行下载命令</h4><p>命令如下，其中要注意的是 <code>10</code> 代表的是同时下载的现成，建议改成50或100，我起初用的默认，下载速度要慢很多。另外配置文件的路径要全路径，并且用两个斜杠。</p><figure class="kg-card kg-code-card"><pre><code>##path模式执行
qshell qdownload -c 10 D:\\qshell\\qdisk_down.conf
##exe模式执行
qshell.exe qdownload -c 10 D:\\qshell\\qdisk_down.conf
</code></pre><figcaption>两种执行方式，切记配置文件要全路径，并且双斜杠</figcaption></figure><h3 id="%E4%B8%8A%E4%BC%A0%E5%8F%88%E6%8B%8D%E4%BA%91">上传又拍云</h3><p>又拍云这边可以使用FTP操作，通过 FTP/FTPS 客户端，可以连接云存储的 FTP/FTPS 服务器，实现对云存储的管理。官方推荐使用 <a href="https://www.filezilla.cn/download?ref=1900.live">FileZilla 客户端</a> 。</p><p>FTP地址：</p><ul><li>智能选路（推荐）： <code>v0.ftp.upyun.com</code> </li><li>电信线路： <code>v1.ftp.upyun.com</code> </li><li>联通线路： <code>v2.ftp.upyun.com</code> </li><li>移动线路： <code>v3.ftp.upyun.com</code> </li></ul><p>加密方式：ftp 选择   “不加密” 模式 ，ftps 选择 “显式的 FTP over TLS” 模式</p><ul><li>用户名：<code>操作员名/服务名</code>，如 <em><code>operator/mybucket</code></em></li><li>密码： <code>操作员的密码</code> </li><li>端口： <code>21</code> </li></ul><p>然后把下载下来的文件上传到根目录后设置CDN绑定即可完成储存系统迁移</p><h3 id="ghost%E7%9A%84%E5%8F%88%E6%8B%8D%E4%BA%91%E4%B8%8A%E4%BC%A0%E7%BB%84%E4%BB%B6">Ghost的又拍云上传组件</h3><p>再推荐一个适用于Ghost的又拍云的上传组件<br> <a href="https://github.com/leoskey/ghost-upyun-store?ref=1900.live">https://github.com/leoskey/ghost-upyun-store</a></p><h3 id="%E5%B9%B2%E4%BA%86%E4%BB%B6%E5%BE%88%E8%A0%A2%E7%9A%84%E4%BA%8B">干了件很蠢的事</h3><p>我装这个又拍云的插件装了好久，一直提示需要配置名为 <code>upyun</code> 的服务，前前后后搞了两个小时。最后发现原来是自己配置文件写错了，把又拍云的配置项写成了七牛云的配置的子内容，因为是JSON格式的配置文件，而且格式没错，所以没报错。</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cdn.1900.live/assets/2022/09/04image.png" class="kg-image" alt loading="lazy" width="550" height="392"><figcaption>注意看括号，我真是🐖</figcaption></figure></article></div><div class="footer"><div><p>
          Built with
          <a target="_blank" href="//gridsome.org" class="link">Gridsome</a>
          &amp; Made with ❤️ by
          <a target="_blank" href="//alex.design" class="link">Alex Brown</a></p></div><div class="footer-links"><a target="_blank" href="/sitemap.xml">Sitemap</a><a target="_blank" href="/feed.xml">RSS Feed</a></div></div></div></main>
    <script>window.__INITIAL_STATE__={"data":{"metadata":{"siteName":"只是玩玩 | JUST FUN","siteDescription":"Hello"},"post":{"id":"63158312cf533d1c2cf29b92","title":"全站HTTPS 【1】：为了薅羊毛七牛迁移到又拍云","content":"\u003Cp\u003E一直以来本站都是使用的Http协议，之前也有想过搞全站Https，但是七牛的Https流量并不纳入免费额度里面，所以如果用的话就意味着薅不到羊毛了。\u003C\u002Fp\u003E\u003Cp\u003E不过七牛虽然不免费，但是又拍云可以，这两家云储存可以说是所有博友基本上都了解过的平台，又拍云也有一个推广联盟的优惠，每月有10G的免费储存空间+15GB的免费流量，这不比七牛香？但是那段时间事情多，迁移好像还比较麻烦，所以就一直搁置了，今天忽然脑子发热就顺手想开始着手搞这件事，所以写篇文章记录一下。\u003C\u002Fp\u003E\u003Cdiv class=\"kg-card kg-callout-card kg-callout-card-white\"\u003E\u003Cdiv class=\"kg-callout-emoji\"\u003E🎁\u003C\u002Fdiv\u003E\u003Cdiv class=\"kg-callout-text\"\u003E欢迎使用我的邀请链接注册，你能获得61元的免费代金券，以及首充返利10%的优惠：\u003Ca href=\"https:\u002F\u002Fconsole.upyun.com\u002Fregister\u002F?invite=9H59vHqjD&ref=1900.live\"\u003Ehttps:\u002F\u002Fconsole.upyun.com\u002Fregister\u002F?invite=9H59vHqjD\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Ch3 id=\"%E7%94%B3%E8%AF%B7%E6%88%90%E4%B8%BA%E5%8F%88%E6%8B%8D%E4%BA%91%E5%A4%A7%E4%BD%BF\"\u003E申请成为又拍云大使\u003C\u002Fh3\u003E\u003Cfigure class=\"kg-card kg-bookmark-card\"\u003E\u003Ca class=\"kg-bookmark-container\" href=\"https:\u002F\u002Fwww.upyun.com\u002Fleague?ref=1900.live\"\u003E\u003Cdiv class=\"kg-bookmark-content\"\u003E\u003Cdiv class=\"kg-bookmark-title\"\u003E又拍云联盟 - 开发者帮助计划，为开发者加速 - 又拍云\u003C\u002Fdiv\u003E\u003Cdiv class=\"kg-bookmark-description\"\u003E又拍云联盟是由又拍云推出的开发者帮助计划，对开发者提供免费且完善的云存储、CDN等服务，加速个人网站、博客、APP等项目\u003C\u002Fdiv\u003E\u003Cdiv class=\"kg-bookmark-metadata\"\u003E\u003Cimg class=\"kg-bookmark-icon\" src=\"https:\u002F\u002Fwww.upyun.com\u002Fstatic\u002Ffavicon-64x64.png\" alt\u003E\u003Cspan class=\"kg-bookmark-author\"\u003E又拍云\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"kg-bookmark-thumbnail\"\u003E\u003Cimg src=\"data:image\u002Fsvg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYxLjIgKDg5NjUzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT5DRE48L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0i6aG16Z2iLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLlr7zoiKrkuIvmi4noj5zljZXkuqflk4EtMTjkuKoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00MDAuMDAwMDAwLCAtMTMwLjAwMDAwMCkiIHN0cm9rZT0iIzMzMzMzMyIgc3Ryb2tlLXdpZHRoPSIwLjgiPgogICAgICAgICAgICA8ZyBpZD0i57yW57uELTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQwMC4wMDAwMDAsIDEzMC4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSLlr7zoiKrooajljZUiPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJDRE4tSUNPTiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJDRE4iIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMDAwMDAwLCAxLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBpZD0i5qSt5ZyG5b2iIiBjeD0iNiIgY3k9IjYiIHI9IjIuNiI+PC9jaXJjbGU+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Y2lyY2xlIGlkPSLmpK3lnIblvaLlpIfku70iIGN4PSIxMC41IiBjeT0iMS41IiByPSIxLjUiPjwvY2lyY2xlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBpZD0i5qSt5ZyG5b2i5aSH5Lu9LTQiIGN4PSIxLjUiIGN5PSIxMC41IiByPSIxLjUiPjwvY2lyY2xlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Iue8lue7hC0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2LjAwMDAwMCwgNi4wMDAwMDApIHNjYWxlKDEsIC0xKSB0cmFuc2xhdGUoLTYuMDAwMDAwLCAtNi4wMDAwMDApICI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Iue8lue7hCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjaXJjbGUgaWQ9IuakreWchuW9ouWkh+S7vSIgY3g9IjEwLjUiIGN5PSIxLjUiIHI9IjEuNSI+PC9jaXJjbGU+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjaXJjbGUgaWQ9IuakreWchuW9ouWkh+S7vS00IiBjeD0iMS41IiBjeT0iMTAuNSIgcj0iMS41Ij48L2NpcmNsZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0i57yW57uELTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMDI1MTI2LCAyLjUyNTEyNikiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjQzODkyNjUzLDAuMDEwODIwOTM3MSBMNS44NDExMzg5NiwxLjYwODYwODUxIE0yLjAzNzA3OTc1LDUuNDEyNjY3NzIgTDAuNDM1MDU3NzkxLDcuMDE0Njg5NjgiIGlkPSLlvaLnirYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy41NDcxNDUyMiw3LjA0NzE0NTIyIEw1LjgwNjczNzU5LDUuMzA2NzM3NTkgTTIuMDY5OTkyNTUsMS41Njk5OTI1NSBMMC41MTAxNjgwOTYsMC4wMTAxNjgwOTU3IiBpZD0i5b2i54q2Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg&#x3D;&#x3D;\" alt\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E点击上面这个链接即可跳转又拍云官方网站，先注册账号，并在你的博客上挂上他们的链接后填写申请即可。可能要等一会儿，我当时好像是隔天才审核通过，不过有可能是因为周末的原因？\u003C\u002Fp\u003E\u003Cfigure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.1900.live\u002Fassets\u002F2022\u002F09\u002F04Snipaste_2022-09-04_12-12-44.jpg\" class=\"kg-image\" alt loading=\"lazy\" width=\"1170\" height=\"625\"\u003E\u003Cfigcaption\u003E又拍云联盟\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Ch3 id=\"%E4%B8%8B%E8%BD%BD%E4%B8%83%E7%89%9B%E4%BA%91%E6%95%B0%E6%8D%AE\"\u003E下载七牛云数据\u003C\u002Fh3\u003E\u003Cp\u003E起初担心自己弄会不会导致导出的文件前缀不对最后因为数据错乱无法访问，不过后来我看了下七牛的一些介绍，发现这些所谓的前缀其实就新建了文件夹，导出后也是以文件夹格式存储的，如： \u003Ccode\u003Eimgs\u002F\u003C\u002Fcode\u003E 前缀，其实就是上传到名为 \u003Ccode\u003Eimgs\u003C\u002Fcode\u003E 的文件夹里，这样就能放心弄了，只要文件夹层级结构一致即可。\u003C\u002Fp\u003E\u003Cp\u003E在迁移七牛云的数据之前我在网络上搜索了一下，发现没有什么现成的工具可以一键完成迁移操作。\u003C\u002Fp\u003E\u003Cp\u003E我也写了个工单问了一下又拍云的工作人员，发现只能通过最原始的方式：先把七牛的下下来，再传上又拍云。\u003C\u002Fp\u003E\u003Cfigure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.1900.live\u002Fassets\u002F2022\u002F09\u002F04Snipaste_2022-09-04_12-18-39.jpg\" class=\"kg-image\" alt loading=\"lazy\" width=\"820\" height=\"772\"\u003E\u003Cfigcaption\u003E又拍云客服答复\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E目前找到的资料都是利用七牛开发者中心的 \u003Ccode\u003Eqshell\u003C\u002Fcode\u003E 工具将所有文件下载下来，再重新上传到其他平台。\u003C\u002Fp\u003E\u003Cfigure class=\"kg-card kg-bookmark-card\"\u003E\u003Ca class=\"kg-bookmark-container\" href=\"https:\u002F\u002Fdeveloper.qiniu.com\u002Fkodo\u002F1302\u002Fqshell?ref=1900.live\"\u003E\u003Cdiv class=\"kg-bookmark-content\"\u003E\u003Cdiv class=\"kg-bookmark-title\"\u003E命令行工具(qshell)_实用工具_对象存储 - 七牛开发者中心\u003C\u002Fdiv\u003E\u003Cdiv class=\"kg-bookmark-description\"\u003Eqshell 工具文档\u003C\u002Fdiv\u003E\u003Cdiv class=\"kg-bookmark-metadata\"\u003E\u003Cimg class=\"kg-bookmark-icon\" src=\"https:\u002F\u002Fqiniu.staticfile.org\u002Ffavicon.ico\" alt\u003E\u003Cspan class=\"kg-bookmark-author\"\u003E开发者中心\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"kg-bookmark-thumbnail\"\u003E\u003Cimg src=\"https:\u002F\u002Fdeveloper.qiniu.com\u002Fassets\u002Flogo-white-b90d685a6b146884636382426d11b7236f5f7ca1c5dfafdb6fa777a0f976fc1f.png\" alt\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003C\u002Ffigure\u003E\u003Ch4 id=\"%E5%AE%89%E8%A3%85qshell\"\u003E安装qshell\u003C\u002Fh4\u003E\u003Cp\u003E我是windows平台，安装的方法有两种一种是直接再目录里执行exe程序，另外一种方法把Bin路径添加到系统Path里。\u003C\u002Fp\u003E\u003Cp\u003E第一种\u003C\u002Fp\u003E\u003Cfigure class=\"kg-card kg-code-card\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003E##假设qshell下载后解压在D盘的qshell目录里\nD:\ncd qshell\nqshell.exe qdownload -c 10 \"配置文件路径\"\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfigcaption\u003E直接执行exe文件\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E第二种\u003C\u002Fp\u003E\u003Cp\u003E打开系统属性环境变量 \u003Ccode\u003E我的电脑上右键 &gt; 属性 &gt; 高级系统设置 &gt; 高级选项卡 &gt; 环境变量按钮\u003C\u002Fcode\u003E 即可。\u003C\u002Fp\u003E\u003Cfigure class=\"kg-card kg-gallery-card kg-width-wide kg-card-hascaption\"\u003E\u003Cdiv class=\"kg-gallery-container\"\u003E\u003Cdiv class=\"kg-gallery-row\"\u003E\u003Cdiv class=\"kg-gallery-image\"\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.1900.live\u002Fassets\u002F2022\u002F09\u002F04Snipaste_2022-09-04_12-35-53.jpg\" width=\"618\" height=\"659\" loading=\"lazy\" alt\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"kg-gallery-image\"\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.1900.live\u002Fassets\u002F2022\u002F09\u002F04Snipaste_2022-09-04_12-36-44.jpg\" width=\"527\" height=\"563\" loading=\"lazy\" alt\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cfigcaption\u003E修改环境变量\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Ch4 id=\"%E5%88%9B%E5%BB%BA%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\"\u003E创建配置文件\u003C\u002Fh4\u003E\u003Cp\u003E然后在同目录下新建一个用于下载时调用的配置文件 \u003Ccode\u003Eqdisk_down.conf\u003C\u002Fcode\u003E ，里面设置了本地文件的存放路径，远端Bucket的名字、只下载指定的文件等等。我的配置如下，我这没有限制后缀，可以把所有的文件全都下载下来。\u003C\u002Fp\u003E\u003Cfigure class=\"kg-card kg-code-card\"\u003E\u003Cpre\u003E\u003Ccode class=\"language-json\"\u003E{\n    \"dest_dir\"               :   \"本地数据备份路径，为全路径\",\n    \"bucket\"                 :   \"空间名称\",\n    \"check_hash\"             :   false,\n    \"cdn_domain\"             :   \"设置下载的 CDN 域名，默认为空表示从存储源站下载，【该功能默认需要计费，如果希望享受 10G 的免费流量，请自行设置 cdn_domain 参数，如不设置，需支付源站流量费用，无法减免！！！】\",\n    \"public\"                 :   true\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfigcaption\u003E批量下载的配置文件\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cdiv class=\"kg-card kg-callout-card kg-callout-card-grey\"\u003E\u003Cdiv class=\"kg-callout-emoji\"\u003E🗒️\u003C\u002Fdiv\u003E\u003Cdiv class=\"kg-callout-text\"\u003E具体的配置参数中文说明可以看这里：\u003Cbr\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fqiniu\u002Fqshell\u002Fblob\u002Fmaster\u002Fdocs\u002Fqdownload.md?ref=1900.live#%E9%80%89%E9%A1%B9\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fqiniu\u002Fqshell\u002Fblob\u002Fmaster\u002Fdocs\u002Fqdownload.md#%E9%80%89%E9%A1%B9\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Ch4 id=\"%E6%89%A7%E8%A1%8C%E4%B8%8B%E8%BD%BD%E5%91%BD%E4%BB%A4\"\u003E执行下载命令\u003C\u002Fh4\u003E\u003Cp\u003E命令如下，其中要注意的是 \u003Ccode\u003E10\u003C\u002Fcode\u003E 代表的是同时下载的现成，建议改成50或100，我起初用的默认，下载速度要慢很多。另外配置文件的路径要全路径，并且用两个斜杠。\u003C\u002Fp\u003E\u003Cfigure class=\"kg-card kg-code-card\"\u003E\u003Cpre\u003E\u003Ccode\u003E##path模式执行\nqshell qdownload -c 10 D:\\\\qshell\\\\qdisk_down.conf\n##exe模式执行\nqshell.exe qdownload -c 10 D:\\\\qshell\\\\qdisk_down.conf\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cfigcaption\u003E两种执行方式，切记配置文件要全路径，并且双斜杠\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Ch3 id=\"%E4%B8%8A%E4%BC%A0%E5%8F%88%E6%8B%8D%E4%BA%91\"\u003E上传又拍云\u003C\u002Fh3\u003E\u003Cp\u003E又拍云这边可以使用FTP操作，通过 FTP\u002FFTPS 客户端，可以连接云存储的 FTP\u002FFTPS 服务器，实现对云存储的管理。官方推荐使用 \u003Ca href=\"https:\u002F\u002Fwww.filezilla.cn\u002Fdownload?ref=1900.live\"\u003EFileZilla 客户端\u003C\u002Fa\u003E 。\u003C\u002Fp\u003E\u003Cp\u003EFTP地址：\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E智能选路（推荐）： \u003Ccode\u003Ev0.ftp.upyun.com\u003C\u002Fcode\u003E \u003C\u002Fli\u003E\u003Cli\u003E电信线路： \u003Ccode\u003Ev1.ftp.upyun.com\u003C\u002Fcode\u003E \u003C\u002Fli\u003E\u003Cli\u003E联通线路： \u003Ccode\u003Ev2.ftp.upyun.com\u003C\u002Fcode\u003E \u003C\u002Fli\u003E\u003Cli\u003E移动线路： \u003Ccode\u003Ev3.ftp.upyun.com\u003C\u002Fcode\u003E \u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003E加密方式：ftp 选择   “不加密” 模式 ，ftps 选择 “显式的 FTP over TLS” 模式\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E用户名：\u003Ccode\u003E操作员名\u002F服务名\u003C\u002Fcode\u003E，如 \u003Cem\u003E\u003Ccode\u003Eoperator\u002Fmybucket\u003C\u002Fcode\u003E\u003C\u002Fem\u003E\u003C\u002Fli\u003E\u003Cli\u003E密码： \u003Ccode\u003E操作员的密码\u003C\u002Fcode\u003E \u003C\u002Fli\u003E\u003Cli\u003E端口： \u003Ccode\u003E21\u003C\u002Fcode\u003E \u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003E然后把下载下来的文件上传到根目录后设置CDN绑定即可完成储存系统迁移\u003C\u002Fp\u003E\u003Ch3 id=\"ghost%E7%9A%84%E5%8F%88%E6%8B%8D%E4%BA%91%E4%B8%8A%E4%BC%A0%E7%BB%84%E4%BB%B6\"\u003EGhost的又拍云上传组件\u003C\u002Fh3\u003E\u003Cp\u003E再推荐一个适用于Ghost的又拍云的上传组件\u003Cbr\u003E \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fleoskey\u002Fghost-upyun-store?ref=1900.live\"\u003Ehttps:\u002F\u002Fgithub.com\u002Fleoskey\u002Fghost-upyun-store\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Ch3 id=\"%E5%B9%B2%E4%BA%86%E4%BB%B6%E5%BE%88%E8%A0%A2%E7%9A%84%E4%BA%8B\"\u003E干了件很蠢的事\u003C\u002Fh3\u003E\u003Cp\u003E我装这个又拍云的插件装了好久，一直提示需要配置名为 \u003Ccode\u003Eupyun\u003C\u002Fcode\u003E 的服务，前前后后搞了两个小时。最后发现原来是自己配置文件写错了，把又拍云的配置项写成了七牛云的配置的子内容，因为是JSON格式的配置文件，而且格式没错，所以没报错。\u003C\u002Fp\u003E\u003Cfigure class=\"kg-card kg-image-card kg-card-hascaption\"\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.1900.live\u002Fassets\u002F2022\u002F09\u002F04image.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"550\" height=\"392\"\u003E\u003Cfigcaption\u003E注意看括号，我真是🐖\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E","date":"4 September 2022","path":"qiniu-migrated-to-the-upyun"}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/gridsome-blog/assets/js/app.32f9dac0.js" defer></script><script src="/gridsome-blog/assets/js/page--src--templates--ghost-post-vue.0de93747.js" defer></script>
  </body>
</html>