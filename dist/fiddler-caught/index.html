<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>只是玩玩 | JUST FUN - 只是玩玩 | JUST FUN</title><meta name="gridsome:hash" content="c172d95f3caedc458b15c41bd34a3ceddae884e7"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="/gridsome-blog"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.9bb7ffafafc09ac851d81afb65b8ef59.png"><link rel="preload" href="/assets/css/0.styles.be694e5c.css" as="style"><link rel="preload" href="/assets/js/app.b62e6b44.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--ghost-post-vue.9ef213ea.js" as="script"><link rel="prefetch" href="/assets/js/6.bfbe7afa.js"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.37be74ee.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-copy-vue.a63bb83d.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.32fdddc8.js"><link rel="stylesheet" href="/assets/css/0.styles.be694e5c.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body  class="darkmode">
    <main role="main" data-server-rendered="true" id="app" class="container"><div class="row"><header class="header"><a href="/" class="active"><h1>👨‍💻 只是玩玩 | JUST FUN</h1></a><!----></header><div class="article"><h1 class="article-title">记一次Fiddler抓包</h1><p class="article-date"> 20 December 2021 · <i> min read</i></p><article><p>最近买了个网课，但是想和我老婆一起看，不过换账号登录很麻烦，而且估计会有登录限制。而且还想给我们一个同事看看，换账号登录就不太现实了。<br>所以就想着看能不能下载下来，不过这个平台的限制做的挺死的，虽然电脑上也能播放，但是只能用微信的内置浏览器打开才可以。用第三方浏览器能打开网页，但是视频加载不出来，尝试了很多办法都没用。</p><p>后来实在没办法了就上V2ex上问了一下，有人说用Fiddler抓包可以，但是没说具体过程。</p><p>所以我先学了一下Fddler的用法。<br>打开软件后是下面这个布局，左边是拦截到的请求，双击左边列表中的项，在右边会出现对应的请求信息。</p><figure class="kg-card kg-image-card"><img src="https://cdn.1900.live/202112/imag15616.png" class="kg-image" alt loading="lazy" width="1262" height="885"></figure><p>不过如果是https请求的话默认不会进行解密，也就无法查看具体的请求信息。所以要进选项里开启<code>https解密</code>解密。</p><ol><li>菜单上点击工具</li><li>选择<code>选项</code></li><li>弹出的窗口里选择 <code>https</code></li><li>然后勾选下图的三个选项，并安装证书即可。</li></ol><figure class="kg-card kg-image-card"><img src="https://cdn.1900.live/202112/image532522.png" class="kg-image" alt loading="lazy" width="671" height="555"></figure><p>然后就会开始截取所有电脑内的请求数据，这个时候我们运行我们想要抓包的软件，然后Fiddler就会开始拦截数据，左边的列表就会出现很多请求，我们就可以通过搜索来查找自己想要的数据了，匹配的数据整行都会变成黄色，这个颜色可以自行设定。</p><figure class="kg-card kg-image-card"><img src="https://cdn.1900.live/202112/image25233.png" class="kg-image" alt loading="lazy" width="1262" height="885"></figure><hr><p>然后我自己去github上搜了一下看有没有相关的代码。这一搜还真让我找到了。<a href="https://github.com/Yxnt/xiaoet?ref=1900.live">https://github.com/Yxnt/xiaoet</a> 这是一个python脚本，根据里面的要求去Fiddler里找对应的数据填上就可以了。</p><pre><code class="language-text-x-python">    APPID = ''  # APPid
    XIAOEID = ''  # Cookie XIAOEID
    RESOURCEID = ''  # ResourceID，这里的resourceid代表课程id
    sessionid = ''  # Cookie laravel_session</code></pre><p>经过一番努力，终于将所有数据全部找齐。但是我全部找到后还是无法下载视频，脚本提示获取课程列表失败，后来用vscode调试了一下，发现虽然请求成功了，但是服务器返回的数据不对，导致无法解析。</p><figure class="kg-card kg-image-card"><img src="https://cdn.1900.live/202112/image4.png" class="kg-image" alt loading="lazy" width="1477" height="759"></figure><p>我仔细分析了一下这个脚本，他用的好像是PC端的请求接口，但是我去官方查了一下，现在官方已经不提供PC端的软件了。所以如果想实现只能自己重新分析请求来找出微信版的接口列表了。</p><p>以后有时间了可以折腾一下试试看，但是最近没时间，所以在网上找了个收费解析的服务，用4.8毛钱把视频全部下载下来了。</p><figure class="kg-card kg-image-card"><img src="https://cdn.1900.live/202112/image55325.png" class="kg-image" alt loading="lazy" width="1118" height="713"></figure></article></div><div class="footer"><div><p>
          Built with
          <a target="_blank" href="//gridsome.org" class="link">Gridsome</a>
          &amp; Made with ❤️ by
          <a target="_blank" href="//alex.design" class="link">Alex Brown</a></p></div><div class="footer-links"><a target="_blank" href="/sitemap.xml">Sitemap</a><a target="_blank" href="/feed.xml">RSS Feed</a></div></div></div></main>
    <script>window.__INITIAL_STATE__={"data":{"metadata":{"siteName":"只是玩玩 | JUST FUN","siteDescription":"\u002Fgridsome-blog"},"post":{"id":"63158312cf533d1c2cf29b6d","title":"记一次Fiddler抓包","content":"\u003Cp\u003E最近买了个网课，但是想和我老婆一起看，不过换账号登录很麻烦，而且估计会有登录限制。而且还想给我们一个同事看看，换账号登录就不太现实了。\u003Cbr\u003E所以就想着看能不能下载下来，不过这个平台的限制做的挺死的，虽然电脑上也能播放，但是只能用微信的内置浏览器打开才可以。用第三方浏览器能打开网页，但是视频加载不出来，尝试了很多办法都没用。\u003C\u002Fp\u003E\u003Cp\u003E后来实在没办法了就上V2ex上问了一下，有人说用Fiddler抓包可以，但是没说具体过程。\u003C\u002Fp\u003E\u003Cp\u003E所以我先学了一下Fddler的用法。\u003Cbr\u003E打开软件后是下面这个布局，左边是拦截到的请求，双击左边列表中的项，在右边会出现对应的请求信息。\u003C\u002Fp\u003E\u003Cfigure class=\"kg-card kg-image-card\"\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.1900.live\u002F202112\u002Fimag15616.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1262\" height=\"885\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E不过如果是https请求的话默认不会进行解密，也就无法查看具体的请求信息。所以要进选项里开启\u003Ccode\u003Ehttps解密\u003C\u002Fcode\u003E解密。\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E菜单上点击工具\u003C\u002Fli\u003E\u003Cli\u003E选择\u003Ccode\u003E选项\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\u003Cli\u003E弹出的窗口里选择 \u003Ccode\u003Ehttps\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\u003Cli\u003E然后勾选下图的三个选项，并安装证书即可。\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cfigure class=\"kg-card kg-image-card\"\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.1900.live\u002F202112\u002Fimage532522.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"671\" height=\"555\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E然后就会开始截取所有电脑内的请求数据，这个时候我们运行我们想要抓包的软件，然后Fiddler就会开始拦截数据，左边的列表就会出现很多请求，我们就可以通过搜索来查找自己想要的数据了，匹配的数据整行都会变成黄色，这个颜色可以自行设定。\u003C\u002Fp\u003E\u003Cfigure class=\"kg-card kg-image-card\"\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.1900.live\u002F202112\u002Fimage25233.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1262\" height=\"885\"\u003E\u003C\u002Ffigure\u003E\u003Chr\u003E\u003Cp\u003E然后我自己去github上搜了一下看有没有相关的代码。这一搜还真让我找到了。\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FYxnt\u002Fxiaoet?ref=1900.live\"\u003Ehttps:\u002F\u002Fgithub.com\u002FYxnt\u002Fxiaoet\u003C\u002Fa\u003E 这是一个python脚本，根据里面的要求去Fiddler里找对应的数据填上就可以了。\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"language-text-x-python\"\u003E    APPID = ''  # APPid\n    XIAOEID = ''  # Cookie XIAOEID\n    RESOURCEID = ''  # ResourceID，这里的resourceid代表课程id\n    sessionid = ''  # Cookie laravel_session\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E经过一番努力，终于将所有数据全部找齐。但是我全部找到后还是无法下载视频，脚本提示获取课程列表失败，后来用vscode调试了一下，发现虽然请求成功了，但是服务器返回的数据不对，导致无法解析。\u003C\u002Fp\u003E\u003Cfigure class=\"kg-card kg-image-card\"\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.1900.live\u002F202112\u002Fimage4.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1477\" height=\"759\"\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E我仔细分析了一下这个脚本，他用的好像是PC端的请求接口，但是我去官方查了一下，现在官方已经不提供PC端的软件了。所以如果想实现只能自己重新分析请求来找出微信版的接口列表了。\u003C\u002Fp\u003E\u003Cp\u003E以后有时间了可以折腾一下试试看，但是最近没时间，所以在网上找了个收费解析的服务，用4.8毛钱把视频全部下载下来了。\u003C\u002Fp\u003E\u003Cfigure class=\"kg-card kg-image-card\"\u003E\u003Cimg src=\"https:\u002F\u002Fcdn.1900.live\u002F202112\u002Fimage55325.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1118\" height=\"713\"\u003E\u003C\u002Ffigure\u003E","date":"20 December 2021","path":"fiddler_caught"}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.b62e6b44.js" defer></script><script src="/assets/js/page--src--templates--ghost-post-vue.9ef213ea.js" defer></script>
  </body>
</html>