{"hash":"c172d95f3caedc458b15c41bd34a3ceddae884e7","data":{"metadata":{"siteName":"只是玩玩 | JUST FUN","siteDescription":"/gridsome-blog"},"post":{"id":"63158312cf533d1c2cf29973","title":"之前相册页面的后序","content":"<!--kg-card-begin: markdown--><h3 id>流产的相册页面</h3>\n<p>之前有写过一篇文章：<a href=\"https://1900.live/the-gallery-page/\">写了个相册页面</a>，当时做了一个页面打算专门用来展示博客之内的所有图片。但是钻了牛角尖在处理后面获取文章内的图片数据时遇到了难题，并且我并不熟悉node.js的编写，也不熟悉Handlebars，对全英文的ghost的api文档更只是一知半解，所以苦于无法下手而搁置流产了。</p>\n<p><img src=\"https://cdn.1900.live/image/7/4e/256df8d7aa47e617eddddcbb686b4.png\" alt=\"之前的效果\" loading=\"lazy\"></p>\n<h3 id>新的思路</h3>\n<p>之前<a href=\"http://www.timem.cn/?ref=1900.live\">匿名者</a>推荐过一个主题，作者是<a href=\"http://www.akina.pw/?ref=1900.live\">akina</a>，但是是一个wordpress的主题，并不适用，在浏览作者博客时发现他的相册页面我似乎可以借鉴过来。总结了一下他的设计</p>\n<ol>\n<li>相册以文章形式展示，并设置封面图。</li>\n<li>相册文章设置特定类别用作和其他文章区分。</li>\n<li>列表状态下展示文章特色图片</li>\n</ol>\n<p>相较我之前的想法来说更合理也更容易在Ghost上实现。</p>\n<p>而后我查看了akina的相册插件，使用的是一款名为：<a href=\"https://github.com/feimosi/baguetteBox.js?ref=1900.live\">baguetteBox</a>的js插件，可以以顶层模态窗口的形式展示图片，并且有很多动画效果、支持多浏览器、支持针对不同分辨率展现不同的图片等等，具体情况可以点击左边github链接进去看看，现在用在我博客效果如下：</p>\n<p><img src=\"https://cdn.1900.live/image/e/71/f0501654f57e245c0b7839c6aed6d.png\" alt=\"baguetteBox效果图\" loading=\"lazy\"></p>\n<h3 id>插件的使用</h3>\n<p>插件使用很简单，先在head处导入js代码和css文件</p>\n<pre><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;css/baguetteBox.min.css&quot;&gt;\n&lt;script src=&quot;js/baguetteBox.min.js&quot; async&gt;&lt;/script&gt;\n</code></pre>\n<p>并在需要实现效果的地方增加以下格式，图片被a链接包裹，链接href指向图片地址（这里可以设置为图片显示为缩略图，a链接的href指向原图）</p>\n<pre><code>&lt;div class=&quot;gallery&quot;&gt;\n    &lt;a href=&quot;img/2-1.jpg&quot; data-caption=&quot;Image caption&quot;&gt;\n        &lt;img src=&quot;img/thumbs/2-1.jpg&quot; alt=&quot;First image&quot;&gt;\n    &lt;/a&gt;\n    &lt;a href=&quot;img/2-2.jpg&quot;&gt;\n        &lt;img src=&quot;img/thumbs/2-2.jpg&quot; alt=&quot;Second image&quot;&gt;\n    &lt;/a&gt;\n    ...\n&lt;/div&gt;\n</code></pre>\n<p>之后再在网页底部编写js，在文档加载完之后初始化相册组件</p>\n<pre><code>&lt;script type=&quot;text/javascript&quot; &gt;\n  baguetteBox.run('.gallery', {\n      // Custom options\n  });\n&lt;/script&gt;\n</code></pre>\n<h3 id>适配实际情况</h3>\n<p>由于ghost使用了Handlebars做为模版语言，而我并不会做相关的后台代码编写所以只能在前台用js实现了。我的想法是在文档加载完之后获取文章主题内的所有img元素，并通过jquery的函数给每一个img标签增加a标签的父元素，并设置href属性。</p>\n<pre><code>function(){\n    $(&quot;.content img&quot;).each(function(){ \n            $(this).wrap(&quot;&lt;a href=&quot;+this.src+&quot;&gt;&lt;/a&gt;&quot;)\n    });\n    $(&quot;.content&quot;).addClass(&quot;gallery&quot;);\n    baguetteBox.run('.gallery', {animation: 'fadeIn'});\n}\n</code></pre>\n<p><img src=\"https://cdn.1900.live/image/8/ad/366a4c352dfa3411cd38312e4f1ca.png\" alt=\"akina相册\" loading=\"lazy\"><br>\n这里我想实现akina上的悬浮效果：鼠标悬浮的图片突出显示，其他图片淡化显示。但是我又不想让所有图片都这样，只有上传的系列图片时才做这样的显示。所以我这里在上面的代码中间增加了一个判断，因为上传图片时在ghost后台只能设置alt属性，所以我在系列图片的alt属性里增加一个字符G，并在增加完文章之后用jquery查询文章中所有alt中带G的图片，并用wrapAll函数将这些元素包裹在指定元素中。</p>\n<pre><code>    if($(&quot;[alt='G']&quot;).length != 0){\n        $(&quot;[alt='G']&quot;).parent().wrapAll(&quot;&lt;div class='ggrid'&gt;&lt;/div&gt;&quot;);\n    }\n</code></pre>\n<p>并编写相关的CSS，这里利用的是not:hover这个元素实现的效果</p>\n<pre><code>.ggrid a{\n  -moz-transition:all 0.25s ease;\n  -webkit-transition:all 0.25s ease;\n  -o-transition:all 0.25s ease;\n  -ms-transition:all 0.25s ease;\n  transition:all 0.25s ease;\n}\n\n.ggrid:hover a:not(:hover){\n  opacity:0.7;\n  -moz-transform:scale(0.9);\n  -ms-transform:scale(0.9);\n  -webkit-transform:scale(0.9);\n  -o-transform:scale(0.9);transform:scale(0.9);\n}\n</code></pre>\n<p>最后我这里实现的最终效果请查看这个<a href=\"https://1900.live/freedom-of-wild-life/\">页面</a>。</p>\n<h3 id>最后</h3>\n<p>目前还有列表以块状展示的效果还没有实现，争取早点写好css。另外，这里虽然我已经在akina上留言说过我已经借鉴他的相关代码，但是还没有经过同意，我这算是先斩后奏了...如果不允许我只有再另外写了...</p>\n<h3 id=\"1214\">12月14日更新</h3>\n<p>!:如果想要显示图片说明信息需要设置a链接的title属性，官方文档写的不清不楚，搞的我把信息设置在img标签的alt上，一直显示不出来，害我查了好久。。。</p>\n<!--kg-card-end: markdown-->","date":"13 December 2016","path":"zeng-jia-liao-xiang-ce-cha-jian"}},"context":{}}