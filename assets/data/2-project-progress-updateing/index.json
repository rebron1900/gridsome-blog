{"hash":"09771c91682eedafd3ee73b22826856fd274f766","data":{"metadata":{"siteName":"只是玩玩 | JUST FUN","siteDescription":"Hello"},"post":{"id":"63158312cf533d1c2cf2998f","title":"[开发日志]2：项目进度(更新贴)","content":"<!--kg-card-begin: markdown--><h3 id>目前已经实现的功能</h3>\n<p>2017年4月22日 增加商品、人员<br>\n2017年4月22日 商品列表<br>\n2017年4月22日 晒单完成了一半，就差写提交函数。</p>\n<h3 id>待实现的功能</h3>\n<ol>\n<li>商品、人员的修改和删除，人和商品不打算做删除功能，到时候加个商品状态，不需要的品种设置成作废，并不查询出来。</li>\n<li>晒单提交</li>\n<li>营业员晒单列表</li>\n<li>营业员晒单明细</li>\n<li>营业员、管理员多功能查询</li>\n<li>管理员审核晒单列表</li>\n<li>管理员晒单审核</li>\n</ol>\n<h3 id>思路</h3>\n<p>搭建webapp应用和用动态语言编写网页有一些区别。首先，打包好的网站页面均是静态页面，不会有任何服务器端语言。因为app打包好后相当于套了一个andriod或者ios程序的壳运行在本地的静态程序而已。所有数据库操作均通过ajax请求服务器端，服务器端提供接口实现。这点是一定要搞明白的。</p>\n<p>fa7的webapp项目文件结构如下。</p>\n<p><img src=\"https://cdn.1900.live/image/6/c2/25f72699c59efe4c8c384539d925a.png\" alt loading=\"lazy\"></p>\n<p>所有的业务逻辑均写在一个js文件之中，所以f7开发大型项目并不合适，写道后期js文件会非常庞大，而且不好阅读。</p>\n<p>其次是服务器端，我这里用的是CI，后台的主要是编写对应的api接口提供前台使用，几乎所有的数据交互我均是通过json来实现的。</p>\n<p><img src=\"https://cdn.1900.live/image/1/93/7efd5c7c72aa0e9e6b43471466fdd.png\" alt loading=\"lazy\"></p>\n<h3 id=\"framework7\">使用framework7时需要注意的地方</h3>\n<p>f7的所有页面载入在不修改默认设置的情况下均是通过ajax加载出来的，而且还做了缓存。并且在载入首页的时候不会调用对应的页面初始化事件，所以在编写一些用于页面初始化调用的函数的时候一定要在对事件里面引用。</p>\n<p>像我就碰到了一个问题，我需要一个首页载入完毕的时候载入所有的商品资料。最开始的函数写在页面初始化的回调函数里，但是后来发现并没有被调用，而且如果使用f7的事件绑定函数单独以这种形式写在外面也是行不通的。</p>\n<pre><code>$$(document).on('load', function() {\n\talert(&quot;123&quot;);\n}\n</code></pre>\n<p>我后来尝试了很多办法均补成功，后来改变了自己的思路：需要加载商品资料的这个页面并不是首页，而是一个内页，也许f7的默认逻辑就是首页不需要初始化，它是一个本来就初始化完成的页面。后来我选择再增加了一个登录页面跳转到这个页面后在页面的初始化函数里完成了数据加载（另外，也许可以用jquery来绑定也许可以成功，不过我没尝试了）</p>\n<!--kg-card-end: markdown-->","date":"22 April 2017","path":"2-project-progress-updateing"}},"context":{}}