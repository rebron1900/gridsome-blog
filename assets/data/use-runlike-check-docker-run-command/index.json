{"hash":"0810a28e7848218696784bc8b33ad1e40c9e72dc","data":{"metadata":{"siteName":"只是玩玩 | JUST FUN","siteDescription":"Hello"},"post":{"id":"631711f83236fa0a468111ef","title":"利用Runlike查看Docker的启动命令","content":"<p>我经常会忘记自己docker容器当时运行的命令，有时候来做删除或者修改之类的都是小心意义，怕一删除或修改容器坏了拉不起来，但是我又不想使用那些臃肿的管理平台，所以得另外想办法。</p><p>官方现有的 <code>docker inspect</code> 可以查看Docker的运行结构，但是这个命令不太好用，输出的内容一长串不太直观，我只想得到一个结果： <code>我这个容器是以什么命令Run起来的</code> 。</p><p>百度了一下找到python有一个叫Runlike的组件，可以获取Docke的启动命令。</p><figure class=\"kg-card kg-bookmark-card\"><a class=\"kg-bookmark-container\" href=\"https://github.com/lavie/runlike?ref=1900.live\"><div class=\"kg-bookmark-content\"><div class=\"kg-bookmark-title\">GitHub - lavie/runlike: Given an existing docker container, prints the command line necessary to run a copy of it.</div><div class=\"kg-bookmark-description\">Given an existing docker container, prints the command line necessary to run a copy of it. - GitHub - lavie/runlike: Given an existing docker container, prints the command line necessary to run a c...</div><div class=\"kg-bookmark-metadata\"><img class=\"kg-bookmark-icon\" src=\"https://github.com/fluidicon.png\" alt><span class=\"kg-bookmark-author\">GitHub</span><span class=\"kg-bookmark-publisher\">lavie</span></div></div><div class=\"kg-bookmark-thumbnail\"><img src=\"https://opengraph.githubassets.com/3ecea4e02e45bbc942f532a19e13bdd1e6173fb2186af574d261ac8ca899e975/lavie/runlike\" alt></div></a></figure><h3 id=\"%E5%AE%89%E8%A3%85\">安装</h3><p>Runlike是一个python写的工具，你可能需要先安装pip包管理器</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-bash\"># 方式1：手动下载安装脚本\ncurl https://bootstrap.pypa.io/get-pip.py -o get-pip.py  \nsudo python get-pip.py    # 运行安装脚本\n\n# 方式2：利用包管理器安装\nsudo apt-get install python-pip</code></pre><figcaption>安装pip，这部分脚本我没测试过</figcaption></figure><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-bash\">pip install runlike  \n\n# 安装完后创建alias\nalias runlike=\"docker run --rm -v /var/run/docker.sock:/var/run/docker.sock assaflavie/runlike\"</code></pre><figcaption>利用pip安装runlike，并创建alias</figcaption></figure><h3 id=\"%E4%BD%BF%E7%94%A8\">使用</h3><pre><code class=\"language-bash\">runlike -p 容器名称 | 容器id 都可以\n\n## 结果\ndocker run \\\n        --name=memos2 \\\n        --hostname=687a544e61da \\\n        --mac-address=0:0:0:0:0:0 \\\n        --env=PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin \\\n        --volume=/test/memos2-data/:/test/memos \\\n        --workdir=/usr/local/memos \\\n        -p 10447:21315 \\\n        --restart=always \\\n        --runtime=runc \\\n        --detach=true \\\n        neosmemo/memos:latest \\\n        --mode prod --port 21315</code></pre>","date":"6 September 2022","path":"use-runlike-check-docker-run-command"}},"context":{}}