{"hash":"2cbfaa773c414da5c97e6a0cf2cb9fa9d7db58ae","data":{"metadata":{"siteName":"只是玩玩 | JUST FUN","siteDescription":"Hello"},"post":{"id":"63158312cf533d1c2cf299c6","title":"利用IFTTT加RSS备份博客","content":"<!--kg-card-begin: markdown--><p>前些天正在<a href=\"https://1900.live/xin-teng/\">算好运也不算好运的一天</a>有说过丢失了几篇文章，当时就感觉数据备份还是有必要的。</p>\n<hr>\n<p>自后我自己问了下百度，大概整理出以下几种方案。</p>\n<blockquote>\n<ol>\n<li>自行定期给vps做快照或者备份。</li>\n<li>备份mysql或者定期从ghost后台导出数据</li>\n<li>如果是linux系统可以利用一些批处理操作定期备份mysql并利用一些邮箱组件发到自己邮箱</li>\n</ol>\n</blockquote>\n<p>前两种操作步骤略微麻烦，第三种安装程度过于复杂，这里贴一下找到的方法吧以后备用：</p>\n<p><strong>安装mutt和sendmail</strong></p>\n<p>这两个组件是用于发送备份好的mysql文件的，如果只打算保存在本地可以跳过这步。</p>\n<pre><code>yum install mutt sendmail -y\n</code></pre>\n<p><strong>批处理脚本</strong></p>\n<p>按照备注修改即可，我这里没做测试，各位自行调试吧。</p>\n<pre><code>#!/bin/sh\nmysql_user=&quot;数据库用户&quot;\nmysql_name=&quot;数据库名&quot;\nmysql_pwd=&quot;数据库密码&quot;\n#要备份网站的数据库信息\nd=`date &quot;+%Y-%m-%d&quot;`\n#定义备份邮件标题，可以区分是哪一天的\nt=&quot;MySQL Backup - $d&quot;\n#发送邮件标题和内容，这个是次要的，主要是附件中的数据库\nBackName=backup_mysql_$d\n#数据库文件名称\nBackPath=/tmp/\n#备份数据库存放路径，我们也可以定期SFTP去下载，这个脚本不会定期删除\nmysqldump -u${mysql_user} -p${mysql_pwd} $mysql_name &gt; $BackPath$BackName.sql\n#导出数据库\ntar cfP $BackPath$BackName.tar $BackPath$BackName.sql\n#压缩数据库包，这样节省空间\necho &quot;$t&quot;|mutt -s &quot;$t&quot; backup@itbulu.com -a $BackPath$BackName.tar\n#用mutt发送邮件，发送到我们指定的邮箱里&quot;backup@itbulu.com&quot;\nexit\n#退出当前脚本\n</code></pre>\n<hr>\n<p><strong>IFTTT</strong></p>\n<p>又恰逢这几天手上事情太多，没什么心情折腾也就放在一边。不过恰逢一位叫<strong>小东子</strong>的朋友在评论里说用到<strong>IFTTT</strong>同步evenote和onenote后了解了下这个叫IFTTT的东西，发现是真的很强大。</p>\n<blockquote>\n<p>ifttt是“if this then that”的缩写，事实上是让你的网络行为能够引发连锁反应、让你使用更为方便，其宗旨是“Put the internet to work for you”（让互联网为你服务）。ifttt旨在帮助人们利用各网站的开放API，将Facebook、Twitter等各个网站或应用衔接，完成任务，使“每个人都可以成为整个互联网不用编程的程序员”。ifttt通过流程将各种信息串联起来，然后再集中把你要的信息呈现给你。解决了信息的冗杂，收取或关注重要信息的问题。</p>\n</blockquote>\n<p>以个人理解来看这东西应该就是一个触发器吧，自己在IFTTT里搜索了下发现有个RSS模块，里面可以检测RSS源，如果有新增的项可以直接抓取后发到gmail邮箱，这里整理下我的设置步骤。</p>\n<p><strong>登陆IFTTT</strong></p>\n<p>先创建一个IFTTT账号吧，貌似可以用google账号直接登陆。登录后点击导航菜单上的搜索按钮，在出来的搜索框中输入rss后会出现一大堆方块，我们选择Applets下的send email rss后跟着提示一步步设置就可以了。</p>\n<p><img src=\"https://cdn.1900.live/201804/search-services-and-applets-on-ifttt-by-category-ifttt.png\" alt=\"search-services-and-applets-on-ifttt-by-category-ifttt\" loading=\"lazy\"></p>\n<p>你点击这个链接貌似可以使用我创建的这个触发方案：<a href=\"https://ifttt.com/applets/75944108d?ref=1900.live\">https://ifttt.com/applets/75944108d</a></p>\n<p><strong>效果</strong></p>\n<p>触发器甚至还可以帮你抓取文章中的焦点图，一般更新博客后几分钟内就会推送到邮箱。</p>\n<p><img src=\"https://cdn.1900.live/201804/timjie-tu-20180404160056.png\" alt=\"timjie-tu-20180404160056\" loading=\"lazy\"></p>\n<p><strong>一点小问题</strong></p>\n<p>不过这个方案有一点小问题，触发器只会在你新增一篇文章的时候抓取，后期如果文章有过修改和更新，触发器是不会重新抓取的，这点请务必注意。不过不知道IFTTT还有没有更高级的用，可以侦测到文章的修改重新发送邮件。</p>\n<!--kg-card-end: markdown-->","date":"4 April 2018","path":"li-yong-iftttjia-rssbei-fen-bo-ke"}},"context":{}}