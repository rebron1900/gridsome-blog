{"hash":"09771c91682eedafd3ee73b22826856fd274f766","data":{"metadata":{"siteName":"只是玩玩 | JUST FUN","siteDescription":"Hello"},"post":{"id":"63158312cf533d1c2cf29b7b","title":"中文排版优化","content":"<figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"https://images.unsplash.com/photo-1583389409210-0234eee7cdce?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDR8fGNoaW5lc2V8ZW58MHx8fHwxNjU0MDcyMjgw&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=2000\" class=\"kg-image\" alt loading=\"lazy\" width=\"6000\" height=\"3376\" srcset=\"https://images.unsplash.com/photo-1583389409210-0234eee7cdce?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDR8fGNoaW5lc2V8ZW58MHx8fHwxNjU0MDcyMjgw&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=600 600w, https://images.unsplash.com/photo-1583389409210-0234eee7cdce?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDR8fGNoaW5lc2V8ZW58MHx8fHwxNjU0MDcyMjgw&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=1000 1000w, https://images.unsplash.com/photo-1583389409210-0234eee7cdce?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDR8fGNoaW5lc2V8ZW58MHx8fHwxNjU0MDcyMjgw&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=1600 1600w, https://images.unsplash.com/photo-1583389409210-0234eee7cdce?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDR8fGNoaW5lc2V8ZW58MHx8fHwxNjU0MDcyMjgw&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=2400 2400w\" sizes=\"(min-width: 1200px) 1200px\"><figcaption>Photo by <a href=\"https://unsplash.com/@qixna?utm_source=ghost&utm_medium=referral&utm_campaign=api-credit\">qi xna</a> / <a href=\"https://unsplash.com/?utm_source=ghost&utm_medium=referral&utm_campaign=api-credit\">Unsplash</a></figcaption></figure><h3 id=\"%F0%9F%8E%88-%E8%B5%B7%E5%9B%A0\">🎈 起因</h3><p>我以前写文章从来没有注意过中英文混排的问题，也没有习惯在打英文或者一些特殊符号之前加上一个空格。期间博客圈的博友们也曾经讨论过这方面的问题，但是一直没太上心。</p><p>直到我偶然看到了<a href=\"https://sivan.github.io/heti/?ref=1900.live\">https://sivan.github.io/heti/</a> 这个项目，并通过延伸大概了解了<a href=\"https://w3c.github.io/clreq/?ref=1900.live\">https://w3c.github.io/clreq/</a> 这个规范。</p><p>因为该规范涉及了字体的使用、出版物的排版规范等等细则，我没有深入接触，因为毕竟是专业排版规范的文章，其实我也没咋看明白，大概瞄了下以下两节。后来找到一篇总结文章：<a href=\"https://github.com/sparanoid/chinese-copywriting-guidelines/blob/master/README.zh-Hans.md?ref=1900.live#%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%88%E6%8E%92%E7%89%88%E6%8C%87%E5%8C%97\">中文文案排版指北</a>，才算是正儿八经看明白。</p><blockquote><a href=\"https://w3c.github.io/clreq/?ref=1900.live#line_composition_rules_for_punctuation_marks\">3.1 标点符号与其排版</a><br><a href=\"https://w3c.github.io/clreq/?ref=1900.live#chinese_and_western_mixed_text_composition\">3.2 中、西文混排处理</a></blockquote><p>引用heti这个项目的一句总结：</p><blockquote>在当下前端技术尚不能完美解决中西文混排间距的情况下，常见的输入习惯是手动在中西文间加入空格（https://github.com/vinta/pangu.js）。这样做的弊端一是间距不可控（有时显得过大），二是通过空格符来排版只能算无奈之举。好消息是在最新的macOS、iOS中，使用原生语言开发的文本区域会自动处理中西文混排的间距（无论是否加空格），期待不用手敲空格的日子早日到来。<br>-----------— heti作者</blockquote><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://cdn.1900.live/202206/image.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"687\" height=\"522\"><figcaption>按规范排版优化后的效果</figcaption></figure><hr><p>我最近的三篇文章已经开始遵循这个规范来进行排版，但是着实有点小麻烦，而且我也不是很注意细节的问题，总要落下几个地方没有按规范排版。其实还是有点小苦恼的，不过heti这个项目中提到过<a href=\"https://github.com/vinta/pangu.js?ref=1900.live\">pangu.js</a>这个项目，发现居然简单的一句话就能自动给网页中的中英文加上空格！</p><p>经过我一番实操，您现在进来看到的文章应该是已经自动加上空格优化了，而且惊奇的发现如果你是打了空格后pangu不会再多给你加一个空格，美滋滋。</p><h3 id=\"%F0%9F%8F%97%EF%B8%8F-%E8%BF%99%E9%87%8C%E5%BD%92%E7%BA%B3%E4%B8%80%E4%B8%8B%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F%E6%8A%8A%E3%80%82\">🏗️ 这里归纳一下使用方式把。</h3><ul><li>引入盘古的库，本地或者CDN都可以。盘古提供了<a href=\"https://www.jsdelivr.com/package/npm/pangu?ref=1900.live\" rel=\"nofollow\">jsDelivr</a> 和 <a href=\"https://cdnjs.com/libraries/pangu?ref=1900.live\" rel=\"nofollow\">cdnjs</a>（这两个国内可能不好使，刚刚引入没梯子加载不出来， 推荐使用bootcdn）</li></ul><pre><code class=\"language-html\">&lt;!-- 1. 下载文件上传到vps，然后引用 --&gt;\n&lt;script src=\"pangu.min.js\"&gt;&lt;/script&gt;\n&lt;!-- 2. 使用cdn，以下任选一个都行 --&gt;\n&lt;script src=\"https://cdn.bootcdn.net/ajax/libs/pangu/4.0.7/pangu.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://cdn.staticfile.org/pangu/4.0.7/pangu.min.js\"&gt;&lt;/script&gt;</code></pre><ul><li>调用pangu对网页进行空格处理。pangu会自动初始化，并提供了几个工具函数调用，分别可以通过id，class，tag进行批量处理。甚至你可以调用自动处理函数。这就要根据大家的各自情况来进行调用了。</li></ul><pre><code class=\"language-html\">&lt;script&gt;\n  //const text = pangu.spacing(\"當你凝視著bug，bug也凝視著你\");\n  // text = '當你凝視著 bug，bug 也凝視著你'\n  //1. 格式化指定id标签\n  //pangu.spacingElementById('main');\n  //2. 格式化带有指定class的标签\n  //pangu.spacingElementByClassName('comment');\n  //3. 格式化指定标签\n  //pangu.spacingElementByTagName('p');\n\n  // 文档加载完毕后自动格式化整个网页\n  document.addEventListener('DOMContentLoaded', () =&gt; {\n    // listen to any DOM change and automatically perform spacing via MutationObserver()\n    pangu.autoSpacingPage();\n  });\n&lt;/script&gt;</code></pre><p>我目前是直接把调用代码加进了ghost的footer script里，主题都不用改，美滋滋。</p>","date":"1 June 2022","path":"chinese_layout_optimization"}},"context":{}}