{"hash":"c29e28eb09cebfa4d5785bfac51829c54a26be66","data":{"metadata":{"siteName":"只是玩玩 | JUST FUN","siteDescription":"Hello"},"post":{"id":"63158312cf533d1c2cf29971","title":"文章内链接自动增加网站icon","content":"<!--kg-card-begin: markdown--><h3 id>为什么做这个</h3>\n<p>之前使用<a href=\"https://luolei.org/?ref=1900.live\">罗磊</a>的一款名为<a href=\"https://luolei.org/a-ghost-theme-yasuko-with-story/?ref=1900.live\">【Yasuko】</a>的主题时发现了一个很有意思的功能：文章内的链接能自动增加来源站的icon。效果大概是下面这样，如果你现在来看这篇文章应该已经实现好这个功能了。我感觉这个功能能给单调的文章增添一些活力，也能给那些来源站做做宣传=w=，所以便想着在现在的这个主题上增加这个功能。<br>\n<img src=\"https://cdn.1900.live/image/c/ef/c0b1b43e675ba9f4c37486223284e.png\" alt loading=\"lazy\"></p>\n<h3 id>实现过程</h3>\n<p>我查看了一下罗磊写的相关代码，发现他是单独做了一些判断，并且使用的是预设好的webfont字体做的图标，这样更为稳定，也更快速，但是缺陷就是大部分不在清单内的网站并不会显示网站图标。凑巧我知道一个黑科技，以前在使用wordpress的时候用过<a href=\"http://c7sky.com/?ref=1900.live\">小影</a>的<a href=\"http://c7sky.com/wordpress-theme-c7v5.html?ref=1900.live\">C7V5</a>的时候发现他做的<a href=\"http://c7sky.com/links?ref=1900.live\">友链页面</a>便可以自动获取网站的icon用作展示，发现只是一个第三方的获取网站icon的工具：<a href=\"//api.byi.pw/favicon?url=%E3%80%82%E4%BD%A0%E5%8F%AA%E9%9C%80%E8%A6%81%E6%8A%8A%E4%BD%A0%E6%83%B3%E8%A6%81%E8%8E%B7%E5%8F%96icon%E7%9A%84%E7%BD%91%E7%AB%99%E7%9A%84%E5%9C%B0%E5%9D%80%E6%94%BE%E5%9C%A8url%E5%90%8E%E8%BE%93%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BE%BF%E8%83%BD%E8%BD%BB%E6%9D%BE%E8%8E%B7%E5%8F%96%E7%BD%91%E7%AB%99%E5%9B%BE%E6%A0%87%E4%BA%86%E3%80%82\">//api.byi.pw/favicon?url=。你只需要把你想要获取icon的网站的地址放在url后输入浏览器便能轻松获取网站图标了。</a></p>\n<p>有了这个黑科技实现这个功能就更加简单了，用jquery获取文章内容主体内的所有a链接，并用echo函数遍历每一个链接对象后再单独设置每个链接的css即可。</p>\n<pre><code>$(&quot;.content a&quot;).each(function(){\n        $(this).css({&quot;padding-left&quot;:&quot;20px&quot;,&quot;margin&quot;:&quot;0px 5px&quot;,&quot;background&quot;:&quot;url(//api.byi.pw/favicon?url=&quot;+this.hostname+&quot;)  no-repeat&quot;});\n    })\n</code></pre>\n<p>敲完代码，打开页面刷新后再看看。是不是既简单、效果又酷炫？哈哈，希望能帮到你。</p>\n<!--kg-card-end: markdown-->","date":"5 December 2016","path":"auto-add-link-icon"}},"context":{}}