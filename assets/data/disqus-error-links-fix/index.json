{"hash":"c29e28eb09cebfa4d5785bfac51829c54a26be66","data":{"metadata":{"siteName":"只是玩玩 | JUST FUN","siteDescription":"Hello"},"post":{"id":"63158312cf533d1c2cf299c5","title":"整理disqus评论","content":"<!--kg-card-begin: markdown--><p>之前因为在hexo和ghost上切换过，域名也换过，导致一些文章的评论不能正常显示，经<a href=\"http://fooleap.org/?ref=1900.live\">fooleap</a>提示让我看下disqus后台的收录链接是否有问题。今天抽空看了下disqus的后台，发现真的是一团遭，整理了下发现主要有已下几个问题：</p>\n<blockquote>\n<ol>\n<li>两个域名混杂</li>\n<li>hexo的短链接格式后面貌似不带最后的反斜杠，ghsot最后带了反斜杠</li>\n<li>hexo为手动设置slug，有时候有大写不会自动转义，ghost域名slug会统一自动转义为小写</li>\n<li>hexo的一些page当时是以.html结尾</li>\n</ol>\n</blockquote>\n<p>fooleap说让我用disqus的Migration Tools来整理文章评论，这里写下具体的操作流程，避免下次忘记。</p>\n<hr>\n<h4 id>导出收录链接表</h4>\n<p>访问disqus的后台管理页面：<a href=\"https://4zen.disqus.com/admin/moderate/?ref=1900.live#/pending\">https://4zen.disqus.com/admin/moderate/#/pending</a> 前面的4zen可以改成你博客的短地址。然后在tools列表上有一个叫Migration Tools的工具。点开后会有三种管理方式。</p>\n<blockquote>\n<p><strong>Domain Migration Tool：</strong> 我换域名的时候用的这个工具，可以直接把你的域名进行转换，如：<a href=\"http://domaina.com/?ref=1900.live\">http://domainA.com</a> &gt; <a href=\"http://domainb.com/?ref=1900.live\">http://domainB.com</a></p>\n</blockquote>\n<blockquote>\n<p><strong>Upload a URL map：</strong> ：上传一个csv的表格问题，第一列为现在链接格式，第二列为需要更改的新格式，如: <a href=\"http://example.com/old-path/old/post.html,http://example.com/new-path/new/post.html?ref=1900.live\">http://example.com/old-path/old/post.html,http://example.com/new-path/new/post.html</a></p>\n</blockquote>\n<blockquote>\n<p><strong>Redirect Crawler (Advanced)</strong> 这个没用过，不知道是什么意思</p>\n</blockquote>\n<p>这里主要是用的upload a url map这个工具，点击页面上的start url map按钮。点击在跳转之后的新页面中的 <code>you can download a CSV here</code> 链接后disqus会往你注册账号时候用的邮箱发一个zip的压缩包，里面有一个你博客所有链接的csv表格文件。</p>\n<h4 id>修改链接表</h4>\n<p>打开表格文件，第一列为disqus收录的现有文章链接。我们根据自身要求把有问题的文章链接一一修改为正确的链接后即可。<code>温馨提示：这里disqus有提示说上传请删除掉正确的不需要修改的链接，避免出现问题。</code></p>\n<p><img src=\"https://cdn.1900.live/201804/timjie-tu-20180402130428.png\" alt=\"timjie-tu-20180402130428\" loading=\"lazy\"></p>\n<p>上传完成后系统会在24小时之内进行数据更正，当时我测试了下，一般上传立马就能看到效果，最长一次也只花了几分钟的时间就修改完成了。</p>\n<!--kg-card-end: markdown-->","date":"2 April 2018","path":"disqus-error-links-fix"}},"context":{}}