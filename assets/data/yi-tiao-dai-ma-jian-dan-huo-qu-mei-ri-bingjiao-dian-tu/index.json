{"hash":"2cbfaa773c414da5c97e6a0cf2cb9fa9d7db58ae","data":{"metadata":{"siteName":"只是玩玩 | JUST FUN","siteDescription":"Hello"},"post":{"id":"63158312cf533d1c2cf29947","title":"一条URL简单获取每日bing焦点图","content":"<!--kg-card-begin: markdown--><h2 id>缘起</h2>\n<p>看着每天都是一样的顶部图片忽然觉得有点了无生趣，没有惊喜，生活不该这样。</p>\n<p>而后又想到windows10登录界面时候的焦点图片可不可以用来做top图片，遂找了一下相关的资料，发现bing有一个接口返回的json里可以获取到焦点图片的url，操作了一下代码如下：</p>\n<p><code>json地址：http://cn.bing.com/HPImageArchive.aspx?format=js&amp;idx=0&amp;n=1</code></p>\n<p>返回的数据如下：</p>\n<pre><code class=\"language-js\">\n{\n    \"images\": [\n        {\n            \"startdate\": \"20160907\", \n            \"fullstartdate\": \"201609071600\", \n            \"enddate\": \"20160908\", \n            \"url\": \"http://s.cn.bing.net/az/hprichbg/rb/Stadsbiblioteket_ZH-CN6055045711_1920x1080.jpg\", \n            \"urlbase\": \"/az/hprichbg/rb/Stadsbiblioteket_ZH-CN6055045711\", \n            \"copyright\": \"斯德哥尔摩公共图书馆，瑞典斯德哥尔摩 (© Gallery Stock)\", \n            \"copyrightlink\": \"http://www.bing.com/search?q=%E6%96%AF%E5%BE%B7%E5%93%A5%E5%B0%94%E6%91%A9%E5%85%AC%E5%85%B1%E5%9B%BE%E4%B9%A6%E9%A6%86&form=hpcapt&mkt=zh-cn\", \n            \"wp\": true, \n            \"hsh\": \"e4dac1ad80973e47b40683281c562497\", \n            \"drk\": 1, \n            \"top\": 1, \n            \"bot\": 1, \n            \"hs\": [ ]\n        }\n    ], \n    \"tooltips\": {\n        \"loading\": \"正在加载...\", \n        \"previous\": \"上一个图像\", \n        \"next\": \"下一个图像\", \n        \"walle\": \"此图片不能下载用作壁纸。\", \n        \"walls\": \"下载今日美图。仅限用作桌面壁纸。\"\n    }\n}\n</code>\n</pre>\n<p>可以发现，images对象下的url属性就是当日bing的图片，我们可以直接获取图片后用jquery改变背景，但是我被残酷百度残酷的告知不能跨域请求，必须要在自己的服务器端做好请求页面，然后js请求本地页面。。</p>\n<pre>\n<code class=\"language-js\">\n$(document).ready(function(){\n\n    $.ajax({\n          type:\"get\",\n          url:\"http://cn.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1\",\n          dataType:\"json\",\n          success: function(data){\n            $(\"#header\").css(\"background-image\",\"url(\"+data['images']['url']+\")\");\n          }\n    });\n</code>\n</pre>\n<p>不过我也是百折不挠的人遂又找到了一个跨域请求的中间站<a href=\"https://jsonp.afeld.me/?ref=1900.live\">JSONProxy</a>，这个网站提供了跨域的请求函数，传过去一个跨域url，还你一个漂亮感觉的json...可惜事实总是残酷的，貌似对微软爸爸的链接并不起作用，但是还是mark过来一下，没准以后能用上。</p>\n<pre><code class=\"language-js\">\n$(document).ready(function(){\n    $.getJSON('https://jsonp.afeld.me/?callback=?&url=http://cn.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1', \n        function(data){\n        alert('返回数据：' + data);\n    });\n});\n</code></pre>\n\n<h2 id>缘灭</h2>\n<p>最后！我发现通过这个地址可以直接获取当日的图片！！！<br>\n<code>http://www.dujin.org/sys/bing/1366.php</code><br>\n<img src=\"http://www.dujin.org/sys/bing/1366.php\" alt=\"今日bing图片\" loading=\"lazy\"></p>\n<!--kg-card-end: markdown-->","date":"8 September 2016","path":"yi-tiao-dai-ma-jian-dan-huo-qu-mei-ri-bingjiao-dian-tu"}},"context":{}}