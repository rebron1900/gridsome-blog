{"hash":"79ad4906a93b028ce0cc44a61d77049cbbf31c8d","data":{"metadata":{"siteName":"只是玩玩 | JUST FUN","siteDescription":"Hello"},"post":{"id":"63158312cf533d1c2cf299bf","title":"hexo发布文章的批处理","content":"<!--kg-card-begin: markdown--><p>感觉hexo发布文章的流程略微繁琐，而且我这边在github pages上和qiniu均做了部署，尤其是qiniu那边我使用的是图形界面的同步工具。每次发布的时候要先打开git bash执行生成命令后在发布到github上，然后又要打开qiniu sync工具上传文件，太为繁琐。</p>\n<h4 id=\"githubpages\">部署到github pages</h4>\n<p>hexo默认安装的时候会自动给你装上github的部署插件hexo-deployer-git<sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup>，你可以在<code>_config.yml</code>里的<code>deploy</code>字段设置，我的设置如下。这里有个小技巧，我设置了<code>extend_dirs: source</code>这个配置想，在每次部署的时候插件会额外把source目录下的md文件全部备份一份进github里，避免以后出现电脑损坏文件丢失的情况。</p>\n<pre><code class=\"language-yaml\"># Deployment\n## Docs: https://hexo.io/docs/deployment.html\ndeploy: \n  type: git\n  repo: https://github.com/QingShui23/blog.git\n  extend_dirs: source\n</code></pre>\n<p>这里设置好后打开git bash进入hexo的根目录。使用git需要先设置你的全球配置信息，执行如下操作即可完成</p>\n<pre><code class=\"language-html\">git config --global user.name &quot;你的用户名&quot;\ngit config --global user.email 你的邮箱\n</code></pre>\n<p>设置好之后输入<code>hexo d</code>即可进行发布。</p>\n<h4 id=\"sync\">七牛sync</h4>\n<p>七牛这边为了省事我安装了hexo-qiniu-sync<sup class=\"footnote-ref\"><a href=\"#fn2\" id=\"fnref2\">[2]</a></sup>插件，然后和github的发布插件一样设置需要同步的文件目录即可，我的设置如下。其中local_dir为你要同步的文件路径。</p>\n<pre><code class=\"language-yaml\">qiniu:\n  offline: false\n  sync: true\n  bucket: 空间\n  access_key: 填入你七牛的ak\n  secret_key: 填入你七牛的sk\n  dirPrefix: \n  urlPrefix: http://h.4zen.top/\n  up_host: http://upload.qiniu.com\n  local_dir: public\n  update_exist: true\n  image: \n    folder: images\n    extend: \n  js:\n    folder: js\n  css:\n    folder: css\n</code></pre>\n<p>然后在git bash里面之行hexo qiniu s即可同步文件至七牛的云控件中，这个插件貌似还可使用本地图片，然后上传后自动给你把本地路径替换成上传后的url地址。不过看这挺复杂的，没有使用这个功能。</p>\n<h4 id>批处理</h4>\n<p>如果以上的命令每次全部都要手动打开git bash执行也是比较繁琐的，所以我写了个批处理来批量执行这些命令。第一行的盘符和第二行的路径请自行根据你的hexo所在位置进行设置。</p>\n<pre><code class=\"language-html\">D:\ncd hexo\ncall hexo clean\ncall hexo g\ncall hexo d\ncall hexo qiniu s\n</code></pre>\n<hr class=\"footnotes-sep\">\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p>七牛同步插件：<a href=\"https://github.com/gyk001/hexo-qiniu-sync?ref=1900.live\">https://github.com/gyk001/hexo-qiniu-sync</a> <a href=\"#fnref1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn2\" class=\"footnote-item\"><p>github同步插件：<a href=\"https://github.com/hexojs/hexo-deployer-git?ref=1900.live\">https://github.com/hexojs/hexo-deployer-git</a> <a href=\"#fnref2\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n</ol>\n</section>\n<!--kg-card-end: markdown-->","date":"28 October 2017","path":"auto-push-hexo"}},"context":{}}